{"version":3,"sources":["webpack:///./src/views/Standpic/index.vue?247f","webpack:///src/views/Standpic/index.vue","webpack:///./src/views/Standpic/index.vue?dc01","webpack:///./src/views/Standpic/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","characters","map","item","i","text","m_ADVCharaID","value","model","callback","$$v","characterID","expression","poses","poseID","staticStyle","faces","key","faceID","loading","$const","sites","standpic","format","base","on","$event","scale","genarateImg","style","height","id","transform","pose","m_FaceReferenceImageType","src","face","_e","staticRenderFns","name","props","data","index","downloading","computed","$db","ADVCharacterListArray","filter","character","m_Datas","m_ResourceBaseName","toLowerCase","faceContainerSize","width","position","left","m_FaceX","top","m_FaceY","methods","load","toBlob","Promise","CanvasElement","resolve","reject","e","imgOnload","arrayBufferToBase64","bytes","forEach","btoa","binary","fileDownloadFromBlob","link","href","url","download","fileName","click","URL","revokeObjectURL","watch","mounted","component","VBtn","VCol","VDivider","VIcon","VImg","VListItem","VListItemAction","VListItemTitle","VList","VOverlay","VProgressCircular","VRow","VSelect"],"mappings":"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","file":"js/chunk-2d0c1569.5060c442.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"display px-4 primary--text\"},[_vm._v(_vm._s(_vm.$t('Standpic')))]),_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"lg\":\"6\"}},[_c('v-select',{staticClass:\"px-4\",attrs:{\"label\":_vm.$t('Character') + \" (\" + (_vm.characters.length) + \")\",\"dense\":\"\",\"items\":_vm.characters.map(function (item, i) { return ({ text: item.m_ADVCharaID, value: i }); })},model:{value:(_vm.characterID),callback:function ($$v) {_vm.characterID=$$v},expression:\"characterID\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"lg\":\"3\"}},[_c('v-select',{staticClass:\"px-4\",attrs:{\"label\":_vm.$t('Pose') + \" (\" + (_vm.poses.length) + \")\",\"dense\":\"\",\"items\":_vm.poses.map(function (item, i) { return ({ text: i, value: i }); })},model:{value:(_vm.poseID),callback:function ($$v) {_vm.poseID=$$v},expression:\"poseID\"}})],1),_c('v-col',{staticStyle:{\"position\":\"relative\"},attrs:{\"cols\":\"12\",\"sm\":\"6\",\"lg\":\"3\"}},[_c('v-select',{staticClass:\"px-4\",attrs:{\"label\":_vm.$t('Face') + \" (\" + (_vm.faces.length) + \")\",\"dense\":\"\",\"items\":_vm.faces.map(function (item, i) { return ({ text: (\"\" + (item.key[2])), value: i }); })},model:{value:(_vm.faceID),callback:function ($$v) {_vm.faceID=$$v},expression:\"faceID\"}}),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":_vm.loading,\"opacity\":\"0\"}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1)],1)],1),_c('v-list-item',{attrs:{\"target\":\"_blank\",\"href\":_vm.$const.sites.standpic.format(_vm.base)}},[_c('v-list-item-title',{staticClass:\"primary--text\"},[_vm._v(_vm._s(_vm.base)+\" - \"+_vm._s(_vm.$t('Assets.Title')))]),_c('v-list-item-action',{staticClass:\"ma-0\"},[_c('v-icon',[_vm._v(\"mdi-open-in-new\")])],1)],1),_c('v-divider',{staticClass:\"mb-4\"}),_c('div',{staticClass:\"px-4 float-right\"},[_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.scale *= 0.8}}},[_c('v-icon',[_vm._v(\"mdi-magnify-minus\")])],1),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.scale = 1}}},[_c('v-icon',[_vm._v(\"mdi-magnify-close\")])],1),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.scale /= 0.8}}},[_c('v-icon',[_vm._v(\"mdi-magnify-plus\")])],1),(_vm.downloading)?_c('v-progress-circular',{staticClass:\"ml-4 mr-2\",attrs:{\"indeterminate\":\"\",\"size\":\"20\",\"width\":\"3\"}}):_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":_vm.genarateImg}},[_c('v-icon',[_vm._v(\"mdi-download\")])],1)],1),_c('div',{staticStyle:{\"width\":\"100%\",\"overflow\":\"hidden\",\"position\":\"relative\"},style:({ height: _vm.scale * 1200 + 'px' })},[_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"50%\",\"transform\":\"translateX(-50%)\"}},[_c('div',{key:_vm.id,style:({ transform: (\"scale(\" + _vm.scale + \") translateY(\" + (((_vm.scale - 1) * 50) / _vm.scale) + \"%)\") })},[(_vm.pose.m_FaceReferenceImageType == 0)?_c('div',{staticClass:\"d-inline-block\"},[_c('div',{staticStyle:{\"position\":\"relative\"}},[_c('div',{style:(_vm.style)},[_c('v-img',{staticStyle:{\"position\":\"absolute\",\"top\":\"50%\",\"left\":\"50%\",\"transform\":\"translate(-50%, -50%)\",\"z-index\":\"1\"},attrs:{\"src\":_vm.src.face}})],1)]),_c('v-img',{attrs:{\"src\":_vm.src.standpic}})],1):(_vm.pose.m_FaceReferenceImageType == 1)?_c('div',{staticClass:\"d-inline-block\"},[_c('v-img',{attrs:{\"src\":_vm.src.face}})],1):_vm._e()])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n//- .py-4.text-center(v-if=\"loading\")\n//-   v-progress-circular(indeterminate=true, color=\"primary\")\n//- .pa-4(v-if=\"!character\")\n//-   KeyValue(:k=\"$t('No Character')\")\ndiv\n  p.display.px-4.primary--text {{ $t('Standpic') }}\n\n  v-row(no-gutters)\n    v-col(cols=12, sm=12, lg=6)\n      v-select.px-4(\n        v-model=\"characterID\",\n        :label=\"$t('Character') + ` (${characters.length})`\",\n        dense,\n        :items=\"characters.map((item, i) => ({ text: item.m_ADVCharaID, value: i }))\"\n      )\n    v-col(cols=12, sm=6, lg=3)\n      v-select.px-4(\n        v-model=\"poseID\",\n        :label=\"$t('Pose') + ` (${poses.length})`\",\n        dense,\n        :items=\"poses.map((item, i) => ({ text: i, value: i }))\"\n      )\n    v-col(cols=12, sm=6, lg=3, style=\"position: relative\")\n      v-select.px-4(\n        v-model=\"faceID\",\n        :label=\"$t('Face') + ` (${faces.length})`\",\n        dense,\n        :items=\"faces.map((item, i) => ({ text: `${item.key[2]}`, value: i }))\"\n      )\n      v-overlay(absolute, :value=\"loading\", opacity=0)\n        v-progress-circular(indeterminate, color=\"primary\")\n\n  v-list-item(target=\"_blank\", :href=\"$const.sites.standpic.format(base)\")\n    v-list-item-title.primary--text {{ base }} - {{ $t('Assets.Title') }}\n    v-list-item-action.ma-0: v-icon mdi-open-in-new\n\n  v-divider.mb-4\n\n  .px-4.float-right\n    v-btn.ml-2(icon, @click=\"scale *= 0.8\"): v-icon mdi-magnify-minus\n    v-btn.ml-2(icon, @click=\"scale = 1\"): v-icon mdi-magnify-close\n    v-btn.ml-2(icon, @click=\"scale /= 0.8\"): v-icon mdi-magnify-plus\n    v-progress-circular.ml-4.mr-2(\n      v-if=\"downloading\",\n      indeterminate,\n      size=\"20\",\n      width=\"3\"\n    )\n    v-btn.ml-2(v-else, icon, @click=\"genarateImg\"): v-icon mdi-download\n\n  div(\n    style=\"width: 100%; overflow: hidden; position: relative\",\n    :style=\"{ height: scale * 1200 + 'px' }\"\n  )\n    div(style=\"position: absolute; left: 50%; transform: translateX(-50%)\")\n      div(\n        :style=\"{ transform: `scale(${scale}) translateY(${((scale - 1) * 50) / scale}%)` }\",\n        :key=\"id\"\n      )\n        .d-inline-block(v-if=\"pose.m_FaceReferenceImageType == 0\")\n          div(style=\"position: relative\")\n            div(:style=\"style\")\n              v-img(\n                :src=\"src.face\",\n                style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1\"\n              )\n          v-img(:src=\"src.standpic\")\n        .d-inline-block(v-else-if=\"pose.m_FaceReferenceImageType == 1\")\n          v-img(:src=\"src.face\")\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'Standpic',\n  props: ['id'],\n  data() {\n    return {\n      index: [],\n      loading: 0,\n      poseID: 0,\n      faceID: 0,\n      scale: 1,\n      characterID: 0,\n      downloading: false,\n    };\n  },\n  computed: {\n    characters() {\n      return this.$db.ADVCharacterListArray.filter((character) =>\n        character.m_ResourceBaseName\n          .toLowerCase()\n          .startsWith(this.id.toLowerCase())\n      );\n    },\n    character() {\n      return this.characters[this.characterID];\n    },\n    poses() {\n      return this.character.m_Datas;\n    },\n    faces() {\n      return this.index.filter(\n        (item) => item.key[0] == 'face' && item.key[1] == this.poseID\n      );\n    },\n    pose() {\n      return this.poses[this.poseID];\n    },\n    face() {\n      return this.faces[this.faceID];\n    },\n    base() {\n      return this.character.m_ResourceBaseName.toLowerCase();\n    },\n    faceContainerSize: () => 270,\n    src() {\n      return {\n        standpic:\n          this.$asset.standpic.format(\n            this.base,\n            `${this.base}_standpic_${this.poseID}`\n          ) + '.png',\n        face:\n          this.$asset.standpic.format(\n            this.base,\n            `${this.base}_face_${this.poseID}_${this.face && this.face.key[2]}`\n          ) + '.png',\n      };\n    },\n    style() {\n      return {\n        width: this.faceContainerSize + 'px',\n        height: this.faceContainerSize + 'px',\n        position: 'absolute',\n        left: this.pose.m_FaceX - this.faceContainerSize / 2 + 'px',\n        top: this.pose.m_FaceY - this.faceContainerSize / 2 + 'px',\n      };\n    },\n  },\n  methods: {\n    load() {\n      this.loading += 1;\n      const loading = this.loading;\n      axios\n        .get(this.$asset.standpic.format(this.base, 'index.json'))\n        .then((response) => {\n          if (loading != this.loading) {\n            return;\n          }\n          this.index = response.data.map((item) => {\n            let key = item.name.split(this.base)[1].split('_').slice(1);\n            item.key = key;\n            return item;\n          });\n          if (this.poseID >= this.poses.length) this.poseID = 0;\n          if (this.faceID >= this.faces.length) this.faceID = 0;\n          this.loading = 0;\n        });\n    },\n    async genarateImg() {\n      this.downloading = true;\n      const canvas = document.createElement('canvas');\n      const chara = new Image();\n      const face = new Image();\n      let useFaceImg;\n\n      const imgLoadPromise = [this.imgOnload(chara, this.src.standpic)];\n\n      if (this.face && this.face.key[2]) {\n        imgLoadPromise.push(this.imgOnload(face, this.src.face));\n        useFaceImg = true;\n      } else {\n        useFaceImg = false;\n      }\n\n      await Promise.all(imgLoadPromise);\n\n      canvas.width = chara.width;\n      canvas.height = chara.height;\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(chara, 0, 0);\n      if (useFaceImg) {\n        ctx.drawImage(\n          face,\n          this.pose.m_FaceX - face.width / 2,\n          this.pose.m_FaceY - face.height / 2\n        );\n      }\n\n      const blob = await this.toBlob(canvas);\n      this.fileDownloadFromBlob(\n        blob,\n        `${this.base}_face_${this.poseID}_${this.face && this.face.key[2]}` +\n        '.png'\n      );\n      this.downloading = false;\n    },\n\n    toBlob(CanvasElement) {\n      return new Promise((resolve, reject) => {\n        try {\n          CanvasElement.toBlob(resolve);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    },\n\n    imgOnload(img, url) {\n      // const CORS = false;\n      return new Promise(async (resolve, reject) => {\n        img.onload = () => resolve();\n        img.onerror = (e) => reject(e);\n        // if (CORS) {\n        //   img.src = url;\n        // } else {\n        const blob = (await axios.get(url, { responseType: 'blob' })).data;\n        const arrayBuffer = await blob.arrayBuffer();\n        const base64 = this.arrayBufferToBase64(arrayBuffer);\n        img.src = 'data:image/png;base64,' + base64;\n        // }\n      });\n    },\n    arrayBufferToBase64(buffer) {\n      let binary = '';\n      const bytes = new Uint8Array(buffer);\n      bytes.forEach((byte) => (binary += String.fromCharCode(byte)));\n      return btoa(binary);\n    },\n    fileDownloadFromBlob(blob, fileName = 'img.png') {\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = fileName;\n      link.click();\n      URL.revokeObjectURL(url);\n    },\n  },\n  watch: {\n    id() {\n      this.characterID = 0;\n    },\n    base() {\n      this.load();\n    },\n  },\n  mounted() {\n    this.load();\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=68eb16a6&lang=pug&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\ninstallComponents(component, {VBtn,VCol,VDivider,VIcon,VImg,VListItem,VListItemAction,VListItemTitle,VOverlay,VProgressCircular,VRow,VSelect})\n"],"sourceRoot":""}