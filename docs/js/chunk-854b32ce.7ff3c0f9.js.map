{"version":3,"sources":["webpack:///./src/views/Standpic/index.vue?6315","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapRegExp.js","webpack:///src/views/Standpic/index.vue","webpack:///./src/views/Standpic/index.vue?e5e2","webpack:///./src/views/Standpic/index.vue","webpack:///./node_modules/core-js/modules/es.symbol.replace.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","model","value","dialog","callback","$$v","expression","isLoadingDb","on","$event","loadAssetBundle","concat","characters","length","map","item","i","text","m_ADVCharaID","characterID","poses","poseID","staticStyle","faces","key","faceID","loading","$const","sites","standpic","format","base","scale","downloading","downloadImg","style","height","id","transform","_m","staticRenderFns","_wrapRegExp","re","groups","BabelRegExp","_super","RegExp","prototype","_groups","WeakMap","flags","_this","set","get","setPrototypeOf","buildGroups","result","g","Object","keys","reduce","name","create","inherits","exec","str","call","Symbol","replace","substitution","_","args","arguments","_typeof","slice","push","apply","props","data","index","computed","$store","state","$db","ADVCharacterListArray","filter","character","toLowerCase","startsWith","m_Datas","pose","face","m_ResourceBaseName","base_row","faceContainerSize","src","width","position","left","top","methods","load","db","path","assetBundle","standpicDB","forEach","img","showImg","chara","imgLoadPromise","useFaceImg","Promise","canvas","ctx","document","blob","toBlob","CanvasElement","reject","imgOnload","url","axios","responseType","fileDownloadFromBlob","link","URL","standpicPath","watch","mounted","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VDialog","VDivider","VIcon","VListItem","VListItemAction","VListItemTitle","VList","VOverlay","VProgressCircular","VRow","VSelect","VSpacer","defineWellKnownSymbol"],"mappings":"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","file":"js/chunk-854b32ce.7ff3c0f9.js","sourcesContent":["var render = function () {\n  var _vm=this;\n  var _h=_vm.$createElement;\n  var _c=_vm._self._c||_h;\n\n  return _c('div', [_c('p', {\n    staticClass: \"display px-4 mb-10 primary--text\"\n  }, [_vm._v(_vm._s(_vm.$t('Standpic')))]), _c('v-row', {\n    attrs: {\n      \"justify\": \"center\"\n    }\n  }, [_c('v-dialog', {\n    attrs: {\n      \"max-width\": \"290\"\n    },\n    model: {\n      value: _vm.dialog,\n      callback: function callback($$v) {\n        _vm.dialog = $$v;\n      },\n      expression: \"dialog\"\n    }\n  }, [!_vm.isLoadingDb ? _c('v-card', [_c('v-card-title', {\n    staticClass: \"text-h5\"\n  }, [_vm._v(\"DBをダウンロードしますか?\")]), _c('v-card-text', [_vm._v(\"この処理には時間がかかることがあります\")]), _c('v-card-actions', [_c('v-spacer'), _c('v-btn', {\n    attrs: {\n      \"color\": \"green darken-1\",\n      \"text\": \"\"\n    },\n    on: {\n      \"click\": function click($event) {\n        _vm.dialog = false;\n      }\n    }\n  }, [_vm._v(\"No\")]), _c('v-btn', {\n    attrs: {\n      \"color\": \"green darken-1\",\n      \"text\": \"\"\n    },\n    on: {\n      \"click\": function click($event) {\n        return _vm.loadAssetBundle();\n      }\n    }\n  }, [_vm._v(\"Yes\")])], 1)], 1) : _c('v-card', [_c('v-card-title', {\n    staticClass: \"text-h5\"\n  }, [_vm._v(\"DBダウンロード中... \"), _c('v-progress-circular', {\n    staticClass: \"ml-3\",\n    attrs: {\n      \"indeterminate\": \"\"\n    }\n  })], 1)], 1)], 1)], 1), _c('v-row', {\n    attrs: {\n      \"no-gutters\": \"\"\n    }\n  }, [_c('v-col', {\n    attrs: {\n      \"cols\": \"12\",\n      \"sm\": \"12\",\n      \"lg\": \"6\"\n    }\n  }, [_c('v-select', {\n    staticClass: \"px-4\",\n    attrs: {\n      \"label\": _vm.$t('Character') + \" (\".concat(_vm.characters.length, \")\"),\n      \"dense\": \"\",\n      \"items\": _vm.characters.map(function (item, i) {\n        return {\n          text: item.m_ADVCharaID,\n          value: i\n        };\n      })\n    },\n    model: {\n      value: _vm.characterID,\n      callback: function callback($$v) {\n        _vm.characterID = $$v;\n      },\n      expression: \"characterID\"\n    }\n  })], 1), _c('v-col', {\n    attrs: {\n      \"cols\": \"12\",\n      \"sm\": \"6\",\n      \"lg\": \"3\"\n    }\n  }, [_c('v-select', {\n    staticClass: \"px-4\",\n    attrs: {\n      \"label\": _vm.$t('Pose') + \" (\".concat(_vm.poses.length, \")\"),\n      \"dense\": \"\",\n      \"items\": _vm.poses.map(function (item, i) {\n        return {\n          text: i,\n          value: i\n        };\n      })\n    },\n    model: {\n      value: _vm.poseID,\n      callback: function callback($$v) {\n        _vm.poseID = $$v;\n      },\n      expression: \"poseID\"\n    }\n  })], 1), _c('v-col', {\n    staticStyle: {\n      \"position\": \"relative\"\n    },\n    attrs: {\n      \"cols\": \"12\",\n      \"sm\": \"6\",\n      \"lg\": \"3\"\n    }\n  }, [_c('v-select', {\n    staticClass: \"px-4\",\n    attrs: {\n      \"label\": _vm.$t('Face') + \" (\".concat(_vm.faces.length, \")\"),\n      \"dense\": \"\",\n      \"items\": _vm.faces.map(function (item, i) {\n        return {\n          text: \"\".concat(item.key[2]),\n          value: i\n        };\n      })\n    },\n    model: {\n      value: _vm.faceID,\n      callback: function callback($$v) {\n        _vm.faceID = $$v;\n      },\n      expression: \"faceID\"\n    }\n  }), _c('v-overlay', {\n    attrs: {\n      \"absolute\": \"\",\n      \"value\": _vm.loading,\n      \"opacity\": \"0\"\n    }\n  }, [_c('v-progress-circular', {\n    attrs: {\n      \"indeterminate\": \"\",\n      \"color\": \"primary\"\n    }\n  })], 1)], 1)], 1), _c('v-list-item', {\n    attrs: {\n      \"target\": \"_blank\",\n      \"href\": _vm.$const.sites.standpic.format(_vm.base)\n    }\n  }, [_c('v-list-item-title', {\n    staticClass: \"primary--text\"\n  }, [_vm._v(_vm._s(_vm.base) + \" - \" + _vm._s(_vm.$t('Assets.Title')))]), _c('v-list-item-action', {\n    staticClass: \"ma-0\"\n  }, [_c('v-icon', [_vm._v(\"mdi-open-in-new\")])], 1)], 1), _c('v-divider', {\n    staticClass: \"mb-4\"\n  }), _c('div', {\n    staticClass: \"px-4 float-right\"\n  }, [_c('v-btn', {\n    staticClass: \"ml-2\",\n    attrs: {\n      \"icon\": \"\"\n    },\n    on: {\n      \"click\": function click($event) {\n        _vm.scale *= 0.8;\n      }\n    }\n  }, [_c('v-icon', [_vm._v(\"mdi-magnify-minus\")])], 1), _c('v-btn', {\n    staticClass: \"ml-2\",\n    attrs: {\n      \"icon\": \"\"\n    },\n    on: {\n      \"click\": function click($event) {\n        _vm.scale = 1;\n      }\n    }\n  }, [_c('v-icon', [_vm._v(\"mdi-magnify-close\")])], 1), _c('v-btn', {\n    staticClass: \"ml-2\",\n    attrs: {\n      \"icon\": \"\"\n    },\n    on: {\n      \"click\": function click($event) {\n        _vm.scale /= 0.8;\n      }\n    }\n  }, [_c('v-icon', [_vm._v(\"mdi-magnify-plus\")])], 1), _vm.downloading ? _c('v-progress-circular', {\n    staticClass: \"ml-4 mr-2\",\n    attrs: {\n      \"indeterminate\": \"\",\n      \"size\": \"20\",\n      \"width\": \"3\"\n    }\n  }) : _c('v-btn', {\n    staticClass: \"ml-2\",\n    attrs: {\n      \"icon\": \"\"\n    },\n    on: {\n      \"click\": _vm.downloadImg\n    }\n  }, [_c('v-icon', [_vm._v(\"mdi-download\")])], 1)], 1), _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"overflow\": \"hidden\",\n      \"position\": \"relative\"\n    },\n    style: {\n      height: _vm.scale * 1200 + 'px'\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"position\": \"absolute\",\n      \"left\": \"50%\",\n      \"transform\": \"translateX(-50%)\"\n    }\n  }, [_c('div', {\n    key: _vm.id,\n    style: {\n      transform: \"scale(\".concat(_vm.scale, \") translateY(\").concat((_vm.scale - 1) * 50 / _vm.scale, \"%)\")\n    }\n  }, [_vm._m(0)])])])], 1);\n}\nvar staticRenderFns = [function () {\n  var _vm=this;\n  var _h=_vm.$createElement;\n  var _c=_vm._self._c||_h;\n\n  return _c('div', {\n    staticClass: \"d-inline-block\"\n  }, [_c('canvas', {\n    staticClass: \"standpic\"\n  })]);\n}]\n\nexport { render, staticRenderFns }","import _typeof from \"./typeof.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport inherits from \"./inherits.js\";\nexport default function _wrapRegExp() {\n  _wrapRegExp = function _wrapRegExp(re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      return groups[name] = result[g[name]], groups;\n    }, Object.create(null));\n  }\n\n  return inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    return result && (result.groups = buildGroups(result, this)), result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        return \"$\" + groups[name];\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != _typeof(args[args.length - 1]) && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}","<template lang=\"pug\">\n//- .py-4.text-center(v-if=\"loading\")\n//-   v-progress-circular(indeterminate=true, color=\"primary\")\n//- .pa-4(v-if=\"!character\")\n//-   KeyValue(:k=\"$t('No Character')\")\ndiv\n  p.display.px-4.mb-10.primary--text {{ $t('Standpic') }}\n\n  v-row(justify=\"center\")\n    v-dialog(v-model=\"dialog\", max-width=\"290\")\n      v-card(v-if=\"!isLoadingDb\")\n        // TODO:i18n\n        v-card-title.text-h5 DBをダウンロードしますか?\n        v-card-text この処理には時間がかかることがあります\n        v-card-actions\n          v-spacer\n          v-btn(color=\"green darken-1\", text, @click=\"dialog = false\") No\n          v-btn(\n            color=\"green darken-1\",\n            text,\n            @click=\"loadAssetBundle()\"\n          ) Yes\n      v-card(v-else)\n        // TODO:i18n\n        v-card-title.text-h5 DBダウンロード中...  \n          v-progress-circular.ml-3(indeterminate)\n        //- v-card-text \n        //-   v-progress-circular(indeterminate)\n      \n\n  v-row(no-gutters)\n    v-col(cols=12, sm=12, lg=6)\n      v-select.px-4(\n        v-model=\"characterID\",\n        :label=\"$t('Character') + ` (${characters.length})`\",\n        dense,\n        :items=\"characters.map((item, i) => ({ text: item.m_ADVCharaID, value: i }))\"\n      )\n    v-col(cols=12, sm=6, lg=3)\n      v-select.px-4(\n        v-model=\"poseID\",\n        :label=\"$t('Pose') + ` (${poses.length})`\",\n        dense,\n        :items=\"poses.map((item, i) => ({ text: i, value: i }))\"\n      )\n    v-col(cols=12, sm=6, lg=3, style=\"position: relative\")\n      v-select.px-4(\n        v-model=\"faceID\",\n        :label=\"$t('Face') + ` (${faces.length})`\",\n        dense,\n        :items=\"faces.map((item, i) => ({ text: `${item.key[2]}`, value: i }))\"\n      )\n      v-overlay(absolute, :value=\"loading\", opacity=0)\n        v-progress-circular(indeterminate, color=\"primary\")\n\n  v-list-item(target=\"_blank\", :href=\"$const.sites.standpic.format(base)\")\n    v-list-item-title.primary--text {{ base }} - {{ $t('Assets.Title') }}\n    v-list-item-action.ma-0: v-icon mdi-open-in-new\n\n  v-divider.mb-4\n\n  .px-4.float-right\n    v-btn.ml-2(icon, @click=\"scale *= 0.8\"): v-icon mdi-magnify-minus\n    v-btn.ml-2(icon, @click=\"scale = 1\"): v-icon mdi-magnify-close\n    v-btn.ml-2(icon, @click=\"scale /= 0.8\"): v-icon mdi-magnify-plus\n    v-progress-circular.ml-4.mr-2(\n      v-if=\"downloading\",\n      indeterminate,\n      size=\"20\",\n      width=\"3\"\n    )\n    v-btn.ml-2(v-else, icon, @click=\"downloadImg\"): v-icon mdi-download\n\n  div(style=\"width: 100%; overflow: hidden; position: relative\",\n   :style=\"{ height: scale * 1200 + 'px' }\"\n  )\n    div(style=\"position: absolute; left: 50%; transform: translateX(-50%)\")\n\n      div(\n          :style=\"{ transform: `scale(${scale}) translateY(${((scale - 1) * 50) / scale}%)` }\",\n          :key=\"id\"\n      )\n        .d-inline-block\n          canvas.standpic\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Standpic\",\n  props: [\"id\"],\n  data() {\n    return {\n      index: [],\n      loading: 0,\n      poseID: 0,\n      faceID: 0,\n      scale: 1,\n      characterID: 0,\n      downloading: false,\n      isLoadingDb: false,\n\n      dialog: false,\n    };\n  },\n  computed: {\n    characters() {\n      return this.$store.state.$db.ADVCharacterListArray.filter((character) =>\n        character.m_ResourceBaseName\n          .toLowerCase()\n          .startsWith(this.id.toLowerCase())\n      );\n    },\n    character() {\n      return this.characters[this.characterID];\n    },\n    poses() {\n      return this.character.m_Datas;\n    },\n    faces() {\n      return this.index.filter(\n        (item) => item.key[0] == \"face\" && item.key[1] == this.poseID\n      );\n    },\n    pose() {\n      return this.poses[this.poseID];\n    },\n    face() {\n      return this.faces[this.faceID];\n    },\n    base() {\n      return this.character.m_ResourceBaseName.toLowerCase();\n    },\n    base_row() {\n      return this.character.m_ResourceBaseName;\n    },\n    faceContainerSize: () => 270,\n\n    src() {\n      return {\n        standpic:\n          \"https://bucket-\" +\n          this.standpicPath() +\n          \"-asset.kirafan.cn/adv/standpic/\" +\n          this.base.toLowerCase() +\n          \"/\" +\n          this.base.toLowerCase() +\n          \"_standpic_\" +\n          this.poseID +\n          \"/\" +\n          this.base_row +\n          \"_StandPic_\" +\n          this.poseID +\n          \".png\",\n        face:\n          \"https://bucket-\" +\n          (this.face ? this.face.path : \"\") +\n          \"-asset.kirafan.cn/adv/standpic/\" +\n          this.base +\n          \"/\" +\n          this.base +\n          \"_face_\" +\n          this.poseID +\n          \"_\" +\n          (((this.face && this.face.key[2]) || \"undefined\").toLowerCase() ||\n            \"undefined\") +\n          \"/\" +\n          this.base_row +\n          \"_Face_\" +\n          this.poseID +\n          \"_\" +\n          (\n            (this.face && this.face.key[2]) ||\n            \"undefined\" ||\n            \"undefined\"\n          ).replace(/^(.)/, (_, p1) => p1.toUpperCase()) +\n          \".png\",\n      };\n    },\n    style() {\n      return {\n        width: this.faceContainerSize + \"px\",\n        height: this.faceContainerSize + \"px\",\n        position: \"absolute\",\n        left: this.pose.m_FaceX - this.faceContainerSize / 2 + \"px\",\n        top: this.pose.m_FaceY - this.faceContainerSize / 2 + \"px\",\n      };\n    },\n  },\n  methods: {\n    async load() {\n      this.loading += 1;\n\n      const db = this.standpicDB()[this.base];\n      this.index = db.map((item) => {\n        let key = item.img.split(this.base)[1].split(\"_\").slice(1);\n        return { key, path: item.path };\n      });\n\n      if (this.poseID >= this.poses.length) this.poseID = 0;\n      if (this.faceID >= this.faces.length) this.faceID = 0;\n      await this.showImg();\n      this.loading = 0;\n    },\n    async loadAssetBundle() {\n      this.isLoadingDb = true;\n\n      let assetBundle;\n      // if (this.$s.loadAssetbundle || false) {\n      assetBundle = this.$store.state.$db.assetBundle;\n      // } else {\n      //   assetBundle = (\n      //     await axios.get(\"https://database.kirafan.cn/assetBundle.json\", {\n      //       responseType: \"json\",\n      //     })\n      //   ).data;\n      // }\n      const standpicDB = {};\n\n      assetBundle\n        .filter((x) => x.name.match(/^adv\\/standpic\\//))\n        // .map((x) => x.name)\n        .forEach((x) => {\n          let name_ = x.name;\n          let path_ = x.path;\n          let r = name_.match(\n            /adv\\/standpic\\/(?<name>[^/]+)\\/(?<img>[^/.]+).muast/\n          );\n          let name = r.groups.name;\n          let img = r.groups.img;\n\n          let path = path_[64];\n          if (!standpicDB[name]) {\n            standpicDB[name] = [];\n          }\n          // if (img.match(\"standpic\")) {\n          //   standpicDB[name].standpicPath = path;\n          // }\n          standpicDB[name].push({ img, path });\n        });\n      this.$store.state.$db.standpicDB = standpicDB;\n      this.load();\n      this.isLoadingDb = false;\n      this.dialog = false;\n    },\n    async showImg() {\n      this.loading = 1;\n      const chara = new Image();\n      const face = new Image();\n      const imgLoadPromise = [this.imgOnload(chara, this.src.standpic)];\n\n      let useFaceImg;\n\n      if (this.face && this.face.key[2]) {\n        imgLoadPromise.push(this.imgOnload(face, this.src.face));\n        useFaceImg = true;\n      } else {\n        useFaceImg = false;\n      }\n\n      await Promise.all(imgLoadPromise);\n\n      await this.$nextTick(() => {\n        const canvas = document.querySelector(\".standpic\");\n        canvas.width = chara.width;\n        canvas.height = chara.height;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(chara, 0, 0);\n        if (useFaceImg) {\n          ctx.drawImage(\n            face,\n            this.pose.m_FaceX - face.width / 2,\n            this.pose.m_FaceY - face.height / 2\n          );\n        }\n        this.loading = 0;\n      });\n    },\n    async downloadImg() {\n      this.downloading = true;\n      const canvas = document.querySelector(\".standpic\");\n      const blob = await this.toBlob(canvas);\n      this.fileDownloadFromBlob(\n        blob,\n        `${this.base}_face_${this.poseID}_${this.face && this.face.key[2]}` +\n          \".png\"\n      );\n      this.downloading = false;\n    },\n\n    toBlob(CanvasElement) {\n      return new Promise((resolve, reject) => {\n        try {\n          CanvasElement.toBlob(resolve);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    },\n\n    imgOnload(img, url) {\n      // const CORS = false;\n      return new Promise(async (resolve, reject) => {\n        img.onload = () => resolve();\n        img.onerror = (e) => reject(e);\n        const blob = (await axios.get(url, { responseType: \"blob\" })).data;\n        img.src = URL.createObjectURL(blob);\n      });\n    },\n    fileDownloadFromBlob(blob, fileName = \"img.png\") {\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.download = fileName;\n      link.click();\n      URL.revokeObjectURL(url);\n    },\n    standpicDB() {\n      return this.$store.state.$db.standpicDB;\n    },\n    standpicPath() {\n      try {\n        return (\n          this.standpicDB()[this.base].find(\n            (x) => x.img === this.base + \"_standpic_\" + String(this.poseID)\n          ).path || \"\"\n        );\n      } catch {\n        return \"\";\n      }\n    },\n  },\n  watch: {\n    id() {\n      this.characterID = 0;\n    },\n    base() {\n      this.load();\n    },\n    poseID() {\n      this.load();\n    },\n    faceID() {\n      this.showImg();\n    },\n  },\n  mounted() {\n    if (this.standpicDB()) {\n      this.load();\n    } else {\n      this.loadAssetBundle();\n    }\n    // if (this.$s.loadAssetbundle || false) {\n    // } else {\n    //   this.dialog = true;\n    // }\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4fb08d9a&lang=pug&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VDialog,VDivider,VIcon,VListItem,VListItemAction,VListItemTitle,VOverlay,VProgressCircular,VRow,VSelect,VSpacer})\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.replace` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.replace\ndefineWellKnownSymbol('replace');\n"],"sourceRoot":""}