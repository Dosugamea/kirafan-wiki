{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.weak-map.js","webpack:///./src/views/Standpic/index.vue?aff4","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///src/views/Standpic/index.vue","webpack:///./src/views/Standpic/index.vue?dc01","webpack:///./src/views/Standpic/index.vue","webpack:///./node_modules/core-js/modules/es.symbol.replace.js","webpack:///./node_modules/core-js/internals/collection-weak.js"],"names":["InternalWeakMap","global","redefineAll","InternalMetadataModule","collection","collectionWeak","isObject","enforceIternalState","enforce","NATIVE_WEAK_MAP","IS_IE11","ActiveXObject","isExtensible","Object","wrapper","init","this","arguments","length","undefined","$WeakMap","module","exports","getConstructor","REQUIRED","WeakMapPrototype","prototype","nativeDelete","nativeHas","has","nativeGet","get","nativeSet","set","key","state","frozen","call","value","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","model","callback","$$v","dialog","expression","isLoadingDb","on","$event","loadAssetBundle","characters","map","item","i","text","m_ADVCharaID","characterID","poses","poseID","staticStyle","faces","faceID","loading","$const","sites","standpic","format","base","scale","downloadImg","style","height","id","transform","_m","staticRenderFns","_isNativeFunction","fn","Function","toString","indexOf","isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","e","_construct","Parent","args","Class","a","push","apply","Constructor","bind","instance","setPrototypeOf","_wrapNativeSuper","_cache","Map","isNativeFunction","TypeError","Wrapper","getPrototypeOf","constructor","create","enumerable","writable","configurable","name","props","data","index","downloading","computed","$db","ADVCharacterListArray","filter","character","m_Datas","pose","face","m_ResourceBaseName","toLowerCase","base_row","faceContainerSize","src","width","position","left","m_FaceX","top","m_FaceY","methods","load","db","showImg","toBlob","Promise","CanvasElement","resolve","reject","imgOnload","arrayBufferToBase64","bytes","forEach","btoa","binary","fileDownloadFromBlob","link","href","url","download","fileName","click","URL","revokeObjectURL","standpicDB","standpicPath","watch","mounted","Error","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VDialog","VDivider","VIcon","VListItem","VListItemAction","VListItemTitle","VList","VOverlay","VProgressCircular","VRow","VSelect","VSpacer","defineWellKnownSymbol","getWeakData","anObject","anInstance","iterate","ArrayIterationModule","$has","InternalStateModule","setInternalState","internalStateGetterFor","getterFor","find","findIndex","uncaughtFrozenStore","store","UncaughtFrozenStore","entries","findUncaughtFrozen","it","entry","splice","CONSTRUCTOR_NAME","IS_MAP","ADDER","C","that","iterable","type","getInternalState","define","add"],"mappings":"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","file":"js/chunk-e7a22722.1e854b7d.js","sourcesContent":["'use strict';\nvar global = require('../internals/global');\nvar redefineAll = require('../internals/redefine-all');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar collection = require('../internals/collection');\nvar collectionWeak = require('../internals/collection-weak');\nvar isObject = require('../internals/is-object');\nvar enforceIternalState = require('../internals/internal-state').enforce;\nvar NATIVE_WEAK_MAP = require('../internals/native-weak-map');\n\nvar IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;\nvar isExtensible = Object.isExtensible;\nvar InternalWeakMap;\n\nvar wrapper = function (init) {\n  return function WeakMap() {\n    return init(this, arguments.length ? arguments[0] : undefined);\n  };\n};\n\n// `WeakMap` constructor\n// https://tc39.github.io/ecma262/#sec-weakmap-constructor\nvar $WeakMap = module.exports = collection('WeakMap', wrapper, collectionWeak);\n\n// IE11 WeakMap frozen keys fix\n// We can't use feature detection because it crash some old IE builds\n// https://github.com/zloirock/core-js/issues/485\nif (NATIVE_WEAK_MAP && IS_IE11) {\n  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);\n  InternalMetadataModule.REQUIRED = true;\n  var WeakMapPrototype = $WeakMap.prototype;\n  var nativeDelete = WeakMapPrototype['delete'];\n  var nativeHas = WeakMapPrototype.has;\n  var nativeGet = WeakMapPrototype.get;\n  var nativeSet = WeakMapPrototype.set;\n  redefineAll(WeakMapPrototype, {\n    'delete': function (key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceIternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeDelete.call(this, key) || state.frozen['delete'](key);\n      } return nativeDelete.call(this, key);\n    },\n    has: function has(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceIternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas.call(this, key) || state.frozen.has(key);\n      } return nativeHas.call(this, key);\n    },\n    get: function get(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceIternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas.call(this, key) ? nativeGet.call(this, key) : state.frozen.get(key);\n      } return nativeGet.call(this, key);\n    },\n    set: function set(key, value) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceIternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        nativeHas.call(this, key) ? nativeSet.call(this, key, value) : state.frozen.set(key, value);\n      } else nativeSet.call(this, key, value);\n      return this;\n    }\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"display px-4 primary--text\"},[_vm._v(_vm._s(_vm.$t('Standpic')))]),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-dialog',{attrs:{\"max-width\":\"290\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[(!_vm.isLoadingDb)?_c('v-card',[_c('v-card-title',{staticClass:\"text-h5\"},[_vm._v(\"DBをダウンロードしますか?\")]),_c('v-card-text',[_vm._v(\"この処理には時間がかかることがあります\")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"green darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"No\")]),_c('v-btn',{attrs:{\"color\":\"green darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.loadAssetBundle()}}},[_vm._v(\"Yes\")])],1)],1):_c('v-card',[_c('v-card-title',{staticClass:\"text-h5\"},[_vm._v(\"DBダウンロード中... \"),_c('v-progress-circular',{staticClass:\"ml-3\",attrs:{\"indeterminate\":\"\"}})],1)],1)],1)],1),_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"lg\":\"6\"}},[_c('v-select',{staticClass:\"px-4\",attrs:{\"label\":_vm.$t('Character') + \" (\" + (_vm.characters.length) + \")\",\"dense\":\"\",\"items\":_vm.characters.map(function (item, i) { return ({ text: item.m_ADVCharaID, value: i }); })},model:{value:(_vm.characterID),callback:function ($$v) {_vm.characterID=$$v},expression:\"characterID\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"lg\":\"3\"}},[_c('v-select',{staticClass:\"px-4\",attrs:{\"label\":_vm.$t('Pose') + \" (\" + (_vm.poses.length) + \")\",\"dense\":\"\",\"items\":_vm.poses.map(function (item, i) { return ({ text: i, value: i }); })},model:{value:(_vm.poseID),callback:function ($$v) {_vm.poseID=$$v},expression:\"poseID\"}})],1),_c('v-col',{staticStyle:{\"position\":\"relative\"},attrs:{\"cols\":\"12\",\"sm\":\"6\",\"lg\":\"3\"}},[_c('v-select',{staticClass:\"px-4\",attrs:{\"label\":_vm.$t('Face') + \" (\" + (_vm.faces.length) + \")\",\"dense\":\"\",\"items\":_vm.faces.map(function (item, i) { return ({ text: (\"\" + (item.key[2])), value: i }); })},model:{value:(_vm.faceID),callback:function ($$v) {_vm.faceID=$$v},expression:\"faceID\"}}),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":_vm.loading,\"opacity\":\"0\"}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1)],1)],1),_c('v-list-item',{attrs:{\"target\":\"_blank\",\"href\":_vm.$const.sites.standpic.format(_vm.base)}},[_c('v-list-item-title',{staticClass:\"primary--text\"},[_vm._v(_vm._s(_vm.base)+\" - \"+_vm._s(_vm.$t('Assets.Title')))]),_c('v-list-item-action',{staticClass:\"ma-0\"},[_c('v-icon',[_vm._v(\"mdi-open-in-new\")])],1)],1),_c('v-divider',{staticClass:\"mb-4\"}),_c('div',{staticClass:\"px-4 float-right\"},[_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.scale *= 0.8}}},[_c('v-icon',[_vm._v(\"mdi-magnify-minus\")])],1),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.scale = 1}}},[_c('v-icon',[_vm._v(\"mdi-magnify-close\")])],1),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.scale /= 0.8}}},[_c('v-icon',[_vm._v(\"mdi-magnify-plus\")])],1),(_vm.downloading)?_c('v-progress-circular',{staticClass:\"ml-4 mr-2\",attrs:{\"indeterminate\":\"\",\"size\":\"20\",\"width\":\"3\"}}):_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":_vm.downloadImg}},[_c('v-icon',[_vm._v(\"mdi-download\")])],1)],1),_c('div',{staticStyle:{\"width\":\"100%\",\"overflow\":\"hidden\",\"position\":\"relative\"},style:({ height: _vm.scale * 1200 + 'px' })},[_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"50%\",\"transform\":\"translateX(-50%)\"}},[_c('div',{key:_vm.id,style:({ transform: (\"scale(\" + _vm.scale + \") translateY(\" + (((_vm.scale - 1) * 50) / _vm.scale) + \"%)\") })},[_vm._m(0)])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-inline-block\"},[_c('canvas',{staticClass:\"standpic\"})])}]\n\nexport { render, staticRenderFns }","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import setPrototypeOf from \"./setPrototypeOf\";\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","<template lang=\"pug\">\n//- .py-4.text-center(v-if=\"loading\")\n//-   v-progress-circular(indeterminate=true, color=\"primary\")\n//- .pa-4(v-if=\"!character\")\n//-   KeyValue(:k=\"$t('No Character')\")\ndiv\n  p.display.px-4.primary--text {{ $t('Standpic') }}\n\n  v-row(justify=\"center\")\n    v-dialog(v-model=\"dialog\", max-width=\"290\")\n      v-card(v-if=\"!isLoadingDb\")\n        // TODO:i18n\n        v-card-title.text-h5 DBをダウンロードしますか?\n        v-card-text この処理には時間がかかることがあります\n        v-card-actions\n          v-spacer\n          v-btn(color=\"green darken-1\", text, @click=\"dialog = false\") No\n          v-btn(\n            color=\"green darken-1\",\n            text,\n            @click=\"loadAssetBundle()\"\n          ) Yes\n      v-card(v-else)\n        // TODO:i18n\n        v-card-title.text-h5 DBダウンロード中...  \n          v-progress-circular.ml-3(indeterminate)\n        //- v-card-text \n        //-   v-progress-circular(indeterminate)\n      \n\n  v-row(no-gutters)\n    v-col(cols=12, sm=12, lg=6)\n      v-select.px-4(\n        v-model=\"characterID\",\n        :label=\"$t('Character') + ` (${characters.length})`\",\n        dense,\n        :items=\"characters.map((item, i) => ({ text: item.m_ADVCharaID, value: i }))\"\n      )\n    v-col(cols=12, sm=6, lg=3)\n      v-select.px-4(\n        v-model=\"poseID\",\n        :label=\"$t('Pose') + ` (${poses.length})`\",\n        dense,\n        :items=\"poses.map((item, i) => ({ text: i, value: i }))\"\n      )\n    v-col(cols=12, sm=6, lg=3, style=\"position: relative\")\n      v-select.px-4(\n        v-model=\"faceID\",\n        :label=\"$t('Face') + ` (${faces.length})`\",\n        dense,\n        :items=\"faces.map((item, i) => ({ text: `${item.key[2]}`, value: i }))\"\n      )\n      v-overlay(absolute, :value=\"loading\", opacity=0)\n        v-progress-circular(indeterminate, color=\"primary\")\n\n  v-list-item(target=\"_blank\", :href=\"$const.sites.standpic.format(base)\")\n    v-list-item-title.primary--text {{ base }} - {{ $t('Assets.Title') }}\n    v-list-item-action.ma-0: v-icon mdi-open-in-new\n\n  v-divider.mb-4\n\n  .px-4.float-right\n    v-btn.ml-2(icon, @click=\"scale *= 0.8\"): v-icon mdi-magnify-minus\n    v-btn.ml-2(icon, @click=\"scale = 1\"): v-icon mdi-magnify-close\n    v-btn.ml-2(icon, @click=\"scale /= 0.8\"): v-icon mdi-magnify-plus\n    v-progress-circular.ml-4.mr-2(\n      v-if=\"downloading\",\n      indeterminate,\n      size=\"20\",\n      width=\"3\"\n    )\n    v-btn.ml-2(v-else, icon, @click=\"downloadImg\"): v-icon mdi-download\n\n  div(style=\"width: 100%; overflow: hidden; position: relative\",\n   :style=\"{ height: scale * 1200 + 'px' }\"\n  )\n    div(style=\"position: absolute; left: 50%; transform: translateX(-50%)\")\n\n      div(\n          :style=\"{ transform: `scale(${scale}) translateY(${((scale - 1) * 50) / scale}%)` }\",\n          :key=\"id\"\n      )\n        .d-inline-block\n          canvas.standpic\n  //- div(\n  //-   style=\"width: 100%; overflow: hidden; position: relative\",\n  //-   :style=\"{ height: scale * 1200 + 'px' }\"\n  //- )\n  //-   div(style=\"position: absolute; left: 50%; transform: translateX(-50%)\")\n  //-     div(\n  //-       :style=\"{ transform: `scale(${scale}) translateY(${((scale - 1) * 50) / scale}%)` }\",\n  //-       :key=\"id\"\n  //-     )\n  //-       .d-inline-block(v-if=\"pose.m_FaceReferenceImageType == 0\")\n  //-         div(style=\"position: relative\")\n  //-           div(:style=\"style\")\n  //-             v-img(\n  //-               :src=\"src.face\",\n  //-               style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1\"\n  //-             )\n  //-         v-img(:src=\"src.standpic\")\n  //-       .d-inline-block(v-else-if=\"pose.m_FaceReferenceImageType == 1\")\n  //-         v-img(:src=\"src.face\")\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Standpic\",\n  props: [\"id\"],\n  data() {\n    return {\n      index: [],\n      loading: 0,\n      poseID: 0,\n      faceID: 0,\n      scale: 1,\n      characterID: 0,\n      downloading: false,\n      isLoadingDb:false,\n\n      dialog: false,\n    };\n  },\n  computed: {\n    characters() {\n      return this.$db.ADVCharacterListArray.filter((character) =>\n        character.m_ResourceBaseName\n          .toLowerCase()\n          .startsWith(this.id.toLowerCase())\n      );\n    },\n    character() {\n      return this.characters[this.characterID];\n    },\n    poses() {\n      return this.character.m_Datas;\n    },\n    faces() {\n      return this.index.filter(\n        (item) => item.key[0] == \"face\" && item.key[1] == this.poseID\n      );\n    },\n    pose() {\n      return this.poses[this.poseID];\n    },\n    face() {\n      return this.faces[this.faceID];\n    },\n    base() {\n      return this.character.m_ResourceBaseName.toLowerCase();\n    },\n    base_row() {\n      return this.character.m_ResourceBaseName;\n    },\n    faceContainerSize: () => 270,\n    \n    src() {\n      return {\n        standpic:\n          \"https://bucket-\" +\n          this.standpicPath() +\n          \"-asset.kirafan.cn/adv/standpic/\" +\n          // blend%EF%BD%93_mahuyu/blend%EF%BD%93_mahuyu_standpic_0/Blend%EF%BD%93_Mahuyu_StandPic_0.png\n\n          // \"https://bucket-0-asset.kirafan.cn/adv/standpic/\" +\n          this.base.toLowerCase() +\n          \"/\" +\n          this.base.toLowerCase() +\n          \"_standpic_0/\" +\n          this.base_row +\n          \"_StandPic_0.png\",\n        face:\n          \"https://bucket-\" +\n          (this.face ? this.face.path : \"\") +\n          \"-asset.kirafan.cn/adv/standpic/\" +\n          this.base +\n          \"/\" +\n          this.base +\n          \"_face_\" +\n          this.poseID +\n          \"_\" +\n          (((this.face && this.face.key[2]) || \"undefined\").toLowerCase() ||\n            \"undefined\") +\n          \"/\" +\n          this.base_row +\n          \"_Face_\" +\n          this.poseID +\n          \"_\" +\n          (\n            (this.face && this.face.key[2]) ||\n            \"undefined\" ||\n            \"undefined\"\n          ).replace(/^(.)/, (_, p1) => p1.toUpperCase()) +\n          \".png\",\n        // this.$asset.standpic.format(\n        //   this.base,\n        //   `${this.base}_face_${this.poseID}_${this.face && this.face.key[2]}`\n        // ) + \".png\",\n      };\n    },\n    style() {\n      return {\n        width: this.faceContainerSize + \"px\",\n        height: this.faceContainerSize + \"px\",\n        position: \"absolute\",\n        left: this.pose.m_FaceX - this.faceContainerSize / 2 + \"px\",\n        top: this.pose.m_FaceY - this.faceContainerSize / 2 + \"px\",\n      };\n    },\n  },\n  methods: {\n\n    load() {\n      this.loading += 1;\n      \n      const db = this.standpicDB()[this.base];\n      this.index = db.map((item) => {\n        let key = item.img\n          .split(this.base)[1]\n          .split(\"_\")\n          .slice(1);\n        return { key, path: item.path };\n      });\n\n      if (this.poseID >= this.poses.length) this.poseID = 0;\n      if (this.faceID >= this.faces.length) this.faceID = 0;\n      this.loading = 0;\n      this.showImg()\n    },\n    async loadAssetBundle() {\n      this.isLoadingDb = true;\n      const assetBundle = (\n        await axios.get(\"https://database.kirafan.cn/assetBundle.json\", {\n          responseType: \"json\",\n        })\n      ).data;\n      const standpicDB = {};\n\n      assetBundle\n        .filter((x) => x.name.match(/^adv\\/standpic\\//))\n        // .map((x) => x.name)\n        .forEach((x) => {\n          let name_ = x.name;\n          let path_ = x.path;\n          let r = name_.match(\n            /adv\\/standpic\\/(?<name>[^/]+)\\/(?<img>[^/.]+).muast/\n          );\n          let name = r.groups.name;\n          let img = r.groups.img;\n          let path = path_[path_.length - 1];\n\n          if (!standpicDB[name]) {\n            standpicDB[name] = [];\n          }\n          if (img.match(\"standpic\")) {\n            standpicDB[name].standpicPath = path;\n          }\n          standpicDB[name].push({ img, path });\n        });\n      this.$db.standpicDB = standpicDB;\n      this.load();\n      this.isLoadingDb = false;\n      this.dialog = false;\n    },\n    async showImg() {\n      this.loading = 1;\n      const chara = new Image();\n      const face = new Image();\n      const canvas = document.querySelector(\".standpic\");\n      const imgLoadPromise = [this.imgOnload(chara, this.src.standpic)];\n\n      let useFaceImg;\n\n      if (this.face && this.face.key[2]) {\n        imgLoadPromise.push(this.imgOnload(face, this.src.face));\n        useFaceImg = true;\n      } else {\n        useFaceImg = false;\n      }\n\n      await Promise.all(imgLoadPromise);\n\n      canvas.width = chara.width;\n      canvas.height = chara.height;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(chara, 0, 0);\n      if (useFaceImg) {\n        ctx.drawImage(\n          face,\n          this.pose.m_FaceX - face.width / 2,\n          this.pose.m_FaceY - face.height / 2\n        );\n      }\n      this.loading = 0;\n\n    },\n    async downloadImg() {\n      this.downloading = true;\n      const canvas = document.querySelector(\".standpic\");\n      const blob = await this.toBlob(canvas);\n      this.fileDownloadFromBlob(\n        blob,\n        `${this.base}_face_${this.poseID}_${this.face && this.face.key[2]}` +\n          \".png\"\n      );\n      this.downloading = false;\n    },\n\n    toBlob(CanvasElement) {\n      return new Promise((resolve, reject) => {\n        try {\n          CanvasElement.toBlob(resolve);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    },\n\n    imgOnload(img, url) {\n      // const CORS = false;\n      return new Promise(async (resolve, reject) => {\n        img.onload = () => resolve();\n        img.onerror = (e) => reject(e);\n        const blob = (await axios.get(url, { responseType: \"blob\" })).data;\n        img.src = URL.createObjectURL(blob);\n      });\n    },\n    arrayBufferToBase64(buffer) {\n      let binary = \"\";\n      const bytes = new Uint8Array(buffer);\n      bytes.forEach((byte) => (binary += String.fromCharCode(byte)));\n      return btoa(binary);\n    },\n    fileDownloadFromBlob(blob, fileName = \"img.png\") {\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.download = fileName;\n      link.click();\n      URL.revokeObjectURL(url);\n    },\n\n    standpicDB() {\n      return this.$db.standpicDB;\n    },\n    standpicPath() {\n      try {\n        return this.standpicDB()[this.base].standpicPath || \"\";\n      } catch {\n        return \"\";\n      }\n    },\n  },\n  watch: {\n    id() {\n      this.characterID = 0;\n    },\n    base() {\n      this.load();\n    },\n    faceID() {\n      this.showImg();\n    },\n  },\n  mounted() {\n    if (this.standpicDB()) {\n      this.load();\n    } else {\n      this.dialog = true;\n    }\n    throw Error()\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1dbdabb8&lang=pug&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VDialog,VDivider,VIcon,VListItem,VListItemAction,VListItemTitle,VOverlay,VProgressCircular,VRow,VSelect,VSpacer})\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.replace` well-known symbol\n// https://tc39.github.io/ecma262/#sec-symbol.replace\ndefineWellKnownSymbol('replace');\n","'use strict';\nvar redefineAll = require('../internals/redefine-all');\nvar getWeakData = require('../internals/internal-metadata').getWeakData;\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar ArrayIterationModule = require('../internals/array-iteration');\nvar $has = require('../internals/has');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\nvar find = ArrayIterationModule.find;\nvar findIndex = ArrayIterationModule.findIndex;\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (store) {\n  return store.frozen || (store.frozen = new UncaughtFrozenStore());\n};\n\nvar UncaughtFrozenStore = function () {\n  this.entries = [];\n};\n\nvar findUncaughtFrozen = function (store, key) {\n  return find(store.entries, function (it) {\n    return it[0] === key;\n  });\n};\n\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.entries.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = findIndex(this.entries, function (it) {\n      return it[0] === key;\n    });\n    if (~index) this.entries.splice(index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, CONSTRUCTOR_NAME);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        id: id++,\n        frozen: undefined\n      });\n      if (iterable != undefined) iterate(iterable, that[ADDER], that, IS_MAP);\n    });\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var data = getWeakData(anObject(key), true);\n      if (data === true) uncaughtFrozenStore(state).set(key, value);\n      else data[state.id] = value;\n      return that;\n    };\n\n    redefineAll(C.prototype, {\n      // 23.3.3.2 WeakMap.prototype.delete(key)\n      // 23.4.3.3 WeakSet.prototype.delete(value)\n      'delete': function (key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state)['delete'](key);\n        return data && $has(data, state.id) && delete data[state.id];\n      },\n      // 23.3.3.4 WeakMap.prototype.has(key)\n      // 23.4.3.4 WeakSet.prototype.has(value)\n      has: function has(key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state).has(key);\n        return data && $has(data, state.id);\n      }\n    });\n\n    redefineAll(C.prototype, IS_MAP ? {\n      // 23.3.3.3 WeakMap.prototype.get(key)\n      get: function get(key) {\n        var state = getInternalState(this);\n        if (isObject(key)) {\n          var data = getWeakData(key);\n          if (data === true) return uncaughtFrozenStore(state).get(key);\n          return data ? data[state.id] : undefined;\n        }\n      },\n      // 23.3.3.5 WeakMap.prototype.set(key, value)\n      set: function set(key, value) {\n        return define(this, key, value);\n      }\n    } : {\n      // 23.4.3.1 WeakSet.prototype.add(value)\n      add: function add(value) {\n        return define(this, value, true);\n      }\n    });\n\n    return C;\n  }\n};\n"],"sourceRoot":""}