{"version":3,"sources":["webpack:///./src/views/Scenario/index.vue?7caa","webpack:///./src/views/Scenario/Item.vue?e680","webpack:///src/views/Scenario/Item.vue","webpack:///./src/views/Scenario/Item.vue?2d97","webpack:///./src/views/Scenario/Item.vue","webpack:///src/views/Scenario/index.vue","webpack:///./src/views/Scenario/index.vue?a295","webpack:///./src/views/Scenario/index.vue?2aaa","webpack:///./src/views/Scenario/index.vue?0400"],"names":["render","_vm","this","_h","$createElement","_c","_self","adv","staticClass","_v","_s","m_Title","m_LibraryID","$t","format","parseInt","m_ScriptTextName","slice","_e","$name","$store","state","$db","ADVLibraryList","m_ListName","attrs","scenarios","index","on","$event","$router","replace","cue","voice_loaded","_l","item","key","get_voice_injected_item","id","staticRenderFns","$size","push","character","m_Datas","m_FaceReferenceImageType","m_FacePattern","$asset","standpic","base","style","show_voice","name","text","voice_url","staticStyle","domProps","$vuetify","breakpoint","xsOnly","props","data","undefined","computed","m_charaName","split","voice","VoiceList","m_VoiceID","ADVCharacterList","indexOf","position","scale","m_ResourceBaseName","toLowerCase","m_text","methods","component","VImg","VListItem","VListItemAvatar","VListItemContent","VList","VListItemSubtitle","components","loading","cue_list","voice_promise","ADVList","$s","loadScenarioVoice","m_CueSheet","categories","1","2","3","4","5","6","7","i","splice","m_AdvID","Boolean","Object","keys","length","get_event_seq","watch","load","mounted","VBtn","VCol","VDivider","VIcon","VProgressCircular","VRow"],"mappings":"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","file":"js/chunk-53ca060b.0e9edd45.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.adv)?_c('div',{staticClass:\"pa-4\"},[_c('KeyValue',{attrs:{\"k\":_vm.$t('No Scenario')}})],1):_c('div',[_c('p',{staticClass:\"display px-4 primary--text\"},[_vm._v(_vm._s(_vm.adv.m_Title))]),(_vm.adv.m_LibraryID!=-1)?[_c('p',{staticClass:\"px-4 primary--text\"},[(_vm.adv.m_ScriptTextName)?[_c('span',[_vm._v(_vm._s(_vm.$t('Section').format(parseInt(_vm.adv.m_ScriptTextName.slice(-2)))))]),_c('span',[_vm._v(\" — \")])]:_vm._e(),_c('span',[_vm._v(_vm._s(_vm.$name(_vm.$store.state.$db.ADVLibraryList[_vm.adv.m_LibraryID].m_ListName)))])],2),_c('div',{staticClass:\"px-4 mb-4\"},[_c('div',{staticClass:\"float-right\"},[_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":!_vm.scenarios[_vm.index+1]},on:{\"click\":function($event){return _vm.$router.replace((\"/scenario/\" + (_vm.scenarios[_vm.index+1].m_AdvID)))}}},[_c('v-icon',[_vm._v(\"mdi-chevron-right\")])],1)],1),_c('div',[_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":!_vm.scenarios[_vm.index-1]},on:{\"click\":function($event){return _vm.$router.replace((\"/scenario/\" + (_vm.scenarios[_vm.index-1].m_AdvID)))}}},[_c('v-icon',[_vm._v(\"mdi-chevron-left\")])],1)],1)])]:_vm._e(),_c('v-divider'),(this.cue && !_vm.voice_loaded)?_c('div',{staticClass:\"py-4 text-center\"},[_c('v-row',[_c('v-col',{staticClass:\"text-end\",attrs:{\"cols\":\"5\"}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1),_c('v-col',{staticClass:\"text-start\",attrs:{\"cols\":\"7\"}},[_c('div',{staticClass:\"pt-2\"},[_vm._v(_vm._s(_vm.$t('Voice Loading')))])])],1)],1):_vm._e(),(!_vm.adv.m_ScriptTextName)?_c('div',{staticClass:\"pa-4\"},[_c('KeyValue',{attrs:{\"k\":_vm.$t('No Scenario')}})],1):(_vm.loading)?_c('div',{staticClass:\"py-4 text-center\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1):[_vm._l((_vm.text),function(item){return _c('div',{key:(\"scenario-text-\" + (item.m_id))},[_c('Item',{attrs:{\"item\":_vm.get_voice_injected_item(item),\"show_voice\":function () { return _vm.voice_loaded; }}})],1)}),_c('v-divider'),_c('Ad',{key:(\"scenario-ad-\" + _vm.id)}),(_vm.adv.m_LibraryID!=-1)?[_c('v-divider',{staticClass:\"mb-4\"}),_c('div',{staticClass:\"px-4\"},[_c('div',{staticClass:\"float-right\"},[_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":!_vm.scenarios[_vm.index+1]},on:{\"click\":function($event){return _vm.$router.replace((\"/scenario/\" + (_vm.scenarios[_vm.index+1].m_AdvID)))}}},[_c('v-icon',[_vm._v(\"mdi-chevron-right\")])],1)],1),_c('div',[_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":!_vm.scenarios[_vm.index-1]},on:{\"click\":function($event){return _vm.$router.replace((\"/scenario/\" + (_vm.scenarios[_vm.index-1].m_AdvID)))}}},[_c('v-icon',[_vm._v(\"mdi-chevron-left\")])],1)],1)])]:_vm._e()]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-list-item',[(_vm.character)?_c('v-list-item-avatar',{staticClass:\"mx-auto mr-2 mr-md-4\",attrs:{\"size\":_vm.$size(),\"tile\":\"\"},on:{\"click\":function($event){return _vm.$router.push((\"/standpic/\" + (_vm.character.m_ResourceBaseName)))}}},[(_vm.character.m_Datas[0].m_FaceReferenceImageType==0 && _vm.character.m_Datas[0].m_FacePattern!=-1)?_c('v-img',{attrs:{\"src\":_vm.$asset.standpic.format(_vm.base, (_vm.base + \"_face_0_default\")) + '.png'}}):(_vm.character.m_Datas[0].m_FaceReferenceImageType==0 && _vm.character.m_Datas[0].m_FacePattern==-1)?_c('div',{style:(_vm.style('standpic_0'))}):(_vm.character.m_Datas[0].m_FaceReferenceImageType==1)?_c('div',{style:(_vm.style('face_0_default'))}):_vm._e()],1):_c('v-list-item-avatar',{staticClass:\"mx-auto mr-2 mr-md-4\",attrs:{\"size\":_vm.$size(),\"tile\":\"\"}}),(_vm.show_voice())?_c('div',{staticClass:\"mr-3\"},[(_vm.voice_url)?_c('voice',{attrs:{\"name\":_vm.name,\"cue\":_vm.text.replace('br', '').replace(/s+/g, ''),\"override_url\":_vm.voice_url}}):_c('Voice',{staticStyle:{\"visibility\":\"hidden\"}})],1):_vm._e(),_c('v-list-item-content',{staticClass:\"mr-auto ml-0 py-1\",staticStyle:{\"max-width\":\"384px\"}},[_c('v-list-item-subtitle',{staticClass:\"primary--text\",domProps:{\"innerHTML\":_vm._s(_vm.name)}}),_c('div',{style:({'line-height': 1.5, 'font-size': _vm.$vuetify.breakpoint.xsOnly ? '70%': null}),domProps:{\"innerHTML\":_vm._s(_vm.text)}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  v-list-item\n    v-list-item-avatar.mx-auto.mr-2.mr-md-4(:size=\"$size()\", tile, \n      v-if=\"character\", @click=\"$router.push(`/standpic/${character.m_ResourceBaseName}`)\")\n\n      v-img(v-if=\"character.m_Datas[0].m_FaceReferenceImageType==0 && character.m_Datas[0].m_FacePattern!=-1\",\n        :src=\"$asset.standpic.format(base, `${base}_face_0_default`) + '.png'\")\n      div(v-else-if=\"character.m_Datas[0].m_FaceReferenceImageType==0 && character.m_Datas[0].m_FacePattern==-1\",\n        :style=\"style('standpic_0')\")\n      div(v-else-if=\"character.m_Datas[0].m_FaceReferenceImageType==1\",\n        :style=\"style('face_0_default')\")\n\n    v-list-item-avatar.mx-auto.mr-2.mr-md-4(:size=\"$size()\", tile, v-else)\n    .mr-3(v-if=\"show_voice()\")\n      voice(\n        v-if=\"voice_url\"\n        :name=\"name\",\n        :cue=\"text.replace('br', '').replace(/\\s+/g, '')\",\n        :override_url=\"voice_url\"\n      )\n      //- XXX:サイズがわからないので、実体を非表示としておいておく\n      Voice(\n        v-else\n        style=\"visibility: hidden;\"\n      )\n\n    v-list-item-content.mr-auto.ml-0.py-1(style=\"max-width: 384px\")\n      v-list-item-subtitle.primary--text(v-html=\"name\")\n      div(v-html=\"text\", :style=\"{'line-height': 1.5, 'font-size': $vuetify.breakpoint.xsOnly ? '70%': null}\")\n        //- p {{item}}\n        //- p {{character}}\n</template>\n\n<script>\nexport default {\n  name: 'Item',\n  props:[\"item\", \"show_voice\"],\n  data() {\n    return {\n      voice_url: undefined,\n    };\n  },\n  computed: {\n    id() {\n      return this.item.m_charaName.split('$')[1] || this.item.m_charaName;\n    },\n    voice () {\n      return this.$store.state.$db.VoiceList[this.item.m_VoiceID];\n    },\n    character() {\n      return this.$store.state.$db.ADVCharacterList[this.id];\n    },\n    name() {\n      return this.item.m_charaName.indexOf('$') == -1 ?\n        (this.character ? this.character.m_DisplayName : this.item.m_charaName) :\n        this.item.m_charaName.split('$')[0];\n    },\n    position() {\n      let x = this.character.m_Datas[0].m_FaceX;\n      let y = this.character.m_Datas[0].m_FaceY;\n      let base = this.$size() * this.scale / 2;\n      return `${base - x}px ${base - y}px`;\n    },\n    scale() {\n      return 200 / this.$size();\n    },\n    base() {\n      return this.character.m_ResourceBaseName.toLowerCase();\n    },\n    text() {\n      return this.item.m_text\n        .replace(/\\n/g, '<br>')\n        .replace(/<color=(.*?)>(.*?)<\\/color>/g, function (_, color, text) {\n          return `<span style=\"color: ${color}\">${text}</span>`;\n        });\n    },\n  },\n  methods: {\n    style(face) {\n      return {\n        'min-height': `${this.$size() * this.scale}px`,\n        'min-width': `${this.$size() * this.scale}px`,\n        'transform': `scale(${1 / this.scale})`,\n        'background-image': `url(${this.$asset.standpic.format(\n          this.base,\n          `${this.base}_${face}`\n        )}.png)`,\n        'background-position': this.position,\n        // 'background-size': '100%',\n      };\n    },\n  },\n  async mounted(){\n    if(this.item.voice_url){\n      this.voice_url = await this.item.voice_url;\n    }\n  }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Item.vue?vue&type=template&id=57bad047&lang=pug&\"\nimport script from \"./Item.vue?vue&type=script&lang=js&\"\nexport * from \"./Item.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VImg,VListItem,VListItemAvatar,VListItemContent,VListItemSubtitle})\n","<template lang=\"pug\">\n  .pa-4(v-if=\"!adv\")\n    KeyValue(:k=\"$t('No Scenario')\")\n\n  div(v-else)\n    p.display.px-4.primary--text {{adv.m_Title}}\n    template(v-if=\"adv.m_LibraryID!=-1\")\n      p.px-4.primary--text\n        template(v-if=\"adv.m_ScriptTextName\")\n          span {{$t('Section').format(parseInt(adv.m_ScriptTextName.slice(-2)))}}\n          span  — \n        span {{$name($store.state.$db.ADVLibraryList[adv.m_LibraryID].m_ListName)}}\n      .px-4.mb-4\n        .float-right\n          v-btn(icon, :disabled=\"!scenarios[index+1]\",\n            @click=\"$router.replace(`/scenario/${scenarios[index+1].m_AdvID}`)\")\n            v-icon mdi-chevron-right\n        div\n          v-btn(icon, :disabled=\"!scenarios[index-1]\",\n            @click=\"$router.replace(`/scenario/${scenarios[index-1].m_AdvID}`)\")\n            v-icon mdi-chevron-left\n\n    v-divider\n\n    .py-4.text-center(v-if=\"this.cue && !voice_loaded\")\n      v-row\n        v-col(cols=\"5\").text-end\n          v-progress-circular(indeterminate=true, color=\"primary\")\n        v-col(cols=\"7\").text-start\n          .pt-2 {{ $t('Voice Loading') }}\n\n    .pa-4(v-if=\"!adv.m_ScriptTextName\")\n      KeyValue(:k=\"$t('No Scenario')\")\n    .py-4.text-center(v-else-if=\"loading\")\n      v-progress-circular(indeterminate=true, color=\"primary\")\n    template(v-else)\n      div(v-for=\"item in text\", :key=\"`scenario-text-${item.m_id}`\")\n        Item(:item=\"get_voice_injected_item(item)\" :show_voice=\"() => voice_loaded\")\n\n      v-divider\n      Ad(:key=\"`scenario-ad-${id}`\")\n\n      template(v-if=\"adv.m_LibraryID!=-1\")\n        v-divider.mb-4\n        .px-4\n          .float-right\n            v-btn(icon, :disabled=\"!scenarios[index+1]\",\n              @click=\"$router.replace(`/scenario/${scenarios[index+1].m_AdvID}`)\")\n              v-icon mdi-chevron-right\n          div\n            v-btn(icon, :disabled=\"!scenarios[index-1]\",\n              @click=\"$router.replace(`/scenario/${scenarios[index-1].m_AdvID}`)\")\n              v-icon mdi-chevron-left\n</template>\n\n<script>\nimport axios from 'axios';\nimport Item from './Item';\nimport cri from \"../../components/cri/acb\";\nimport define from \"../../define\";\nconst fs = window.require(\"fs\");\nconst Buffer = window.require(\"buffer\").Buffer;\n\nexport default {\n  name: 'Scenario',\n  props: ['id'],\n  components: { Item },\n  data() {\n    return {\n      loading: 0,\n      text: null,\n      cue_list: {},\n      voice_promise: undefined,\n    };\n  },\n  computed: {\n    adv() {\n      return this.$store.state.$db.ADVList[this.id];\n    },\n    cue () {\n      return this.$s.loadScenarioVoice ? this.adv.m_CueSheet : undefined;\n    },\n    categories() {\n      return {\n        1: { name: 'story', path: 'Story' },\n        2: { name: 'event', path: 'Event' },\n        3: { name: 'chara', path: 'CharaEvent' },\n        4: { name: 'chara', path: 'CrossEvent' },\n        5: { name: 'weapon', path: 'WeaponEvent' },\n        6: { name: 'other', path: 'Other' },\n        7: { name: 'writer', path: 'Writer' },\n      };\n    },\n    scenarios() {\n      let scenarios = this.adv.m_LibraryID == -1 ? [] :\n        this.$store.state.$db.ADVListArray.filter(item => item.m_LibraryID == this.adv.m_LibraryID);\n      for (let i = 0; i < scenarios.length; i++) {\n        if (i > 0 && scenarios[i].m_ScriptTextName &&\n          scenarios[i].m_ScriptTextName == scenarios[i - 1].m_ScriptTextName) {\n          scenarios[i - 1].m_Title = scenarios[i - 1].m_Title\n            .replace('（イントロ）', '')\n            .replace('イントロ', '')\n            .trim();\n          scenarios.splice(i, 1);\n          i -= 1;\n        }\n      }\n      return scenarios;\n    },\n    index() {\n      for (let i in this.scenarios) {\n        if (this.scenarios[i].m_AdvID == this.id) {\n          return parseInt(i);\n        }\n      }\n      return undefined;\n    },\n    voice_loaded() {\n      return Boolean(Object.keys(this.cue_list).length);\n    },\n  },\n  methods: {\n    get_voice_injected_item (item) {\n      item.voice_url = (async()=> {  \n        await this.voice_promise;\n        return this.cue_list[`${item.m_voiceLabel}_0.wav`];  \n      })();\n      return item;\n    },\n    async get_audiobuffer_then_write(file_name, file_save_name) {\n      const proxy_url =\n        \"https://krr-proxy.herokuapp.com/cri/?name=\";\n      // const rvh = await this.$lazy.rvh;\n\n      await fetch(`${proxy_url}${file_name}`)\n        .then((res) => res.arrayBuffer())\n        .then((data) => {\n          fs.writeFileSync(file_save_name, Buffer(data));\n        });\n    },\n    get_event_seq(file_base_name) {\n      return ( '00' + String(parseInt(file_base_name.slice(-2))-1)).slice(-2)\n    },\n    async get_acb_awb(file_base_name, file_save_name) {\n      const cri_audio_acb = this.get_audiobuffer_then_write(\n        `${file_base_name}.acb`, `${file_base_name}.acb`\n      );\n      const cri_audio_awb = this.get_audiobuffer_then_write(\n        `${file_base_name}.awb`, `${file_save_name}.awb`\n      );\n      await Promise.all([cri_audio_acb, cri_audio_awb]);\n    },\n    async unpack_to_cue_list(file_base_name, file_save_name) {\n      const key = define.cri_key;\n      const namels_n_prom = await cri.acbParse(`${file_base_name}.acb`, key);\n      namels_n_prom.map(([Name, prom]) => {\n        const url = async () => {\n          await this.voice_promise;\n          await prom().catch(() => {});\n          const audio = fs.readFileSync(\n            `./${file_save_name}/${Name}`\n          );\n          const blob = new Blob([audio], { type: \"audio/wav\" });\n          return URL.createObjectURL(blob);\n        };\n        this.$set(this.cue_list, Name,  { url: url, promise: true });\n      });\n    },\n    async load() {\n      this.cue_list = {};\n      this.voice_promise = undefined;\n      if (!this.adv || !this.adv.m_ScriptTextName) {\n        return;\n      }\n      this.loading += 1;\n      const loading = this.loading;\n      if (this.cue) {\n        let file_save_name = this.cue;\n        if (this.cue.startsWith('event')) {\n          file_save_name = `event_000000000${this.get_event_seq(file_save_name)}`;\n        }\n        this.voice_promise = (async()=>{\n          await this.get_acb_awb(this.cue, file_save_name);\n          await this.unpack_to_cue_list(this.cue, file_save_name);\n        })();\n      }\n      axios\n        .get(this.$asset.advscript.format(\n          this.categories[this.adv.m_Category].name,\n          this.categories[this.adv.m_Category].path,\n          this.adv.m_ScriptTextName) + '.json')\n        .then(response => {\n          if (loading != this.loading) {\n            return;\n          }\n          this.text = response.data;\n          this.loading = 0;\n        });\n    },\n  },\n  watch: {\n    id() {\n      this.load();\n    }\n  },\n  mounted() {\n    this.load();\n  },\n};\n</script>\n\n<style scoped>\n.line {\n  font-size: 80%;\n  line-height: 1.5;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=92fabe94&scoped=true&lang=pug&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=92fabe94&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"92fabe94\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VDivider,VIcon,VProgressCircular,VRow})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=92fabe94&scoped=true&lang=css&\""],"sourceRoot":""}