(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c1d74fc"],{5794:function(e,r,a){a("fb6a"),a("d3b7"),a("25f0"),a("96cf");var t=window.require("fs"),n=a("eed9"),o=n.promisify(t.readFile);function i(e){var r,a,t,n,i,c,s,l,u;return regeneratorRuntime.async((function(f){while(1)switch(f.prev=f.next){case 0:if("string"!==typeof e){f.next=4;break}return f.next=3,regeneratorRuntime.awrap(o(e));case 3:e=f.sent;case 4:if(e&&!(e.length<4)){f.next=6;break}return f.abrupt("return",null);case 6:if(r=0,a={},a.buffer=e,a.magic=e.slice(r,4).toString(),r+=4,"AFS2"===a.magic){f.next=13;break}return f.abrupt("return",null);case 13:for(a.unknown1=e.readUInt8(r),r+=1,a.sizeLen=e.readUInt8(r),r+=1,a.unknown2=e.readUInt8(r),r+=1,a.unknown3=e.readUInt8(r),r+=1,a.fileCount=e.readUInt32LE(r),r+=4,a.align=e.readUInt16LE(r),r+=2,a.key=e.readUInt16LE(r),r+=2,a.fileIds=[],t=0;t<a.fileCount;t++)n=e.readUInt16LE(r),r+=2,a.fileIds.push(n);for(i=[],2===a.sizeLen?(c=e.readUInt16LE(r),r+=2):4===a.sizeLen?(c=e.readUInt32LE(r),r+=4):console.log("Unknown sizeLen: "+a.sizeLen),s=c%a.align,0!=s&&(c+=a.align-s),l=0;l<a.fileCount;l++)u=void 0,2===a.sizeLen?(u=e.readUInt16LE(r),r+=2):4===a.sizeLen?(u=e.readUInt32LE(r),r+=4):console.log("Unknown sizeLen: "+a.sizeLen),i.push(e.slice(c,u)),c=u,s=c%a.align,0!=s&&(c+=a.align-s);return i.config=a,f.abrupt("return",i);case 36:case"end":return f.stop()}}))}r.parseAFS2=i},c85d:function(e,r,a){function t(e,r){while(0!==e[r])r++;return r}function n(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||e.length<4)return null;var a=0,o={};if(o.magic=e.slice(a,4).toString(),a+=4,"@UTF"!==o.magic)return null;o.dataSize=e.readUInt32BE(a),a+=4,e=e.slice(a),a=0,o.unknown=e.readUInt16BE(a),a+=2,o.valueOffset=e.readUInt16BE(a),a+=2,o.stringOffset=e.readUInt32BE(a),a+=4,o.dataOffset=e.readUInt32BE(a),a+=4,o.nameOffset=e.readUInt32BE(a),a+=4,o.elementCount=e.readUInt16BE(a),a+=2,o.valueSize=e.readUInt16BE(a),a+=2,o.pageCount=e.readUInt32BE(a),a+=4;var i=t(e,o.stringOffset);o.name=e.slice(o.stringOffset,i).toString();var c=o.valueOffset,s=[];o.types=[];for(var l=a,u=0;u<o.pageCount;u++){var f={};a=l;for(var d=0;d<o.elementCount;d++){var p=e.readUInt8(a);a+=1,0===u&&(o.types[d]=p);var v=o.stringOffset+e.readUInt32BE(a);a+=4,i=t(e,v);var b=e.slice(v,i).toString(),m=p>>>5;p&=31;var w=null;if(m>0){var h=1===m?a:c;switch(p){case 16:w=e.readInt8(h),h+=1;break;case 17:w=e.readUInt8(h),h+=1;break;case 18:w=e.readInt16BE(h),h+=2;break;case 19:w=e.readUInt16BE(h),h+=2;break;case 20:w=e.readInt32BE(h),h+=4;break;case 21:w=e.readUInt32BE(h),h+=4;break;case 22:w=e.readBigInt64BE(h),h+=8;break;case 23:w=e.readBigUInt64BE(h),h+=8;break;case 24:w=e.readFloatBE(h),h+=4;break;case 25:console.log("0x19"),w=e.readDoubleBE(h),h+=8;break;case 26:v=o.stringOffset+e.readUInt32BE(h),h+=4,i=t(e,v),w=e.slice(v,i).toString();break;case 27:var k=o.dataOffset+e.readUInt32BE(h);h+=4;var g=e.readUInt32BE(h);h+=4,w=e.slice(k,k+g);var I=n(w,r);I?w=I:r&&(w=e.slice(k,k+g).toString("hex"));break;default:console.log("unknown type: ".concat(p));break}1===m?a=h:c=h}f[b]=w}s.push(f)}return s.config=o,s}a("fb6a"),a("d3b7"),a("25f0"),r.parseUtf=n},cb38:function(e,r,a){a("a4d3"),a("e01a"),a("d28b"),a("7db0"),a("a15b"),a("d3b7"),a("3ca3"),a("ddb0"),a("96cf");var t=window.require("path"),n=a("eed9"),o=window.require("fs"),i=a("5794"),c=a("d96e"),s=a("c85d"),l=n.promisify(o.readFile),u=n.promisify(o.mkdir);function f(e){var r,a,n,c,u,f,d,p,v,b,m;return regeneratorRuntime.async((function(w){while(1)switch(w.prev=w.next){case 0:return r=t.parse(e),w.next=3,regeneratorRuntime.awrap(l(e));case 3:if(a=w.sent,n=s.parseUtf(a),n){w.next=7;break}throw new Error("NOT ACB FILE");case 7:if(1===n.length){w.next=9;break}throw new Error("Failed to parse ACB file");case 9:return c=n[0],c.buffer=a,w.next=13,regeneratorRuntime.awrap(i.parseAFS2(c.AwbFile));case 13:c.memoryHcas=w.sent,c.streamHcas=[],u=0;case 16:if(!(u<c.StreamAwbHash.length)){w.next=27;break}if(f=c.StreamAwbHash[u],d=t.join(r.dir,f.Name+".awb"),!o.existsSync(d)){w.next=24;break}return w.next=22,regeneratorRuntime.awrap(i.parseAFS2(d));case 22:p=w.sent,c.streamHcas.push(p);case 24:u++,w.next=16;break;case 27:v=0;case 28:if(!(v<c.WaveformTable.length)){w.next=37;break}if(b=c.WaveformTable[v],m=0===b.Streaming,m){w.next=34;break}if(c.streamHcas[b.StreamAwbPortNo]){w.next=34;break}throw new Error("MISSING ".concat(c.StreamAwbHash[v].Name,".awb"));case 34:v++,w.next=28;break;case 37:return w.abrupt("return",c);case 38:case"end":return w.stop()}}))}function d(e,r,a,n,i,s){var l,d,p,v,b,m,w,h,k,g,I,U,E,x,F,y,S,B,L,C,R;return regeneratorRuntime.async((function(A){while(1)switch(A.prev=A.next){case 0:return l=t.parse(e),A.next=3,regeneratorRuntime.awrap(f(e));case 3:if(d=A.sent,void 0===a&&(a=t.join(l.dir,d.Name)),o.existsSync(a)){A.next=10;break}return A.next=8,regeneratorRuntime.awrap(u(a,{recursive:!0}));case 8:A.next=13;break;case 10:if(!s){A.next=13;break}return console.log("Skipped ".concat(l.base,"...")),A.abrupt("return");case 13:if(p=0,v=0,b=[],19922944!==d.Version){A.next=21;break}m=d.SequenceTable,w="NumTracks",A.next=27;break;case 21:if(20119552!==d.Version){A.next=26;break}m=d.CueTable,w="NumRelatedWaveforms",A.next=27;break;case 26:throw new Error("Unsupported ACB version");case 27:for(h=!0,k=!1,g=void 0,A.prev=30,I=m[Symbol.iterator]();!(h=(U=I.next()).done);h=!0){for(E=U.value,x=0;x<E[w];x++)F=p,y=d.WaveformTable[F],S=0===y.Streaming,B=S?d.memoryHcas[y.MemoryAwbId]:d.streamHcas[y.StreamAwbPortNo][y.StreamAwbId],L=S?d.memoryHcas.config.key:d.streamHcas[y.StreamAwbPortNo].config.key,C=d.CueNameTable.find((function(e){return e.CueIndex===v})).CueName+"_"+x+".wav",R=t.join(a,C),b.push(c.decodeHcaToWav(B,r,L,R,n,i)),p++;v++}A.next=38;break;case 34:A.prev=34,A.t0=A["catch"](30),k=!0,g=A.t0;case 38:A.prev=38,A.prev=39,h||null==I.return||I.return();case 41:if(A.prev=41,!k){A.next=44;break}throw g;case 44:return A.finish(41);case 45:return A.finish(38);case 46:return A.next=48,regeneratorRuntime.awrap(Promise.all(b));case 48:case"end":return A.stop()}}),null,null,[[30,34,38,46],[39,,41,45]])}function p(e,r,a,n,i,s){var l,d,p,v,b,m,w,h,k,g,I,U,E,x,F;return regeneratorRuntime.async((function(y){while(1)switch(y.prev=y.next){case 0:return l=t.parse(e),y.next=3,regeneratorRuntime.awrap(f(e));case 3:if(d=y.sent,void 0===a&&(a=t.join(l.dir,d.Name)),o.existsSync(a)){y.next=10;break}return y.next=8,regeneratorRuntime.awrap(u(a,{recursive:!0}));case 8:y.next=13;break;case 10:if(!s){y.next=13;break}return console.log("Skipped ".concat(l.base,"...")),y.abrupt("return");case 13:if(p=0,v=0,19922944!==d.Version){y.next=20;break}b=d.SequenceTable,m="NumTracks",y.next=26;break;case 20:if(20119552!==d.Version){y.next=25;break}b=d.CueTable,m="NumRelatedWaveforms",y.next=26;break;case 25:throw new Error("Unsupported ACB version");case 26:for(w=[],h=!0,k=!1,g=void 0,y.prev=30,I=b[Symbol.iterator]();!(h=(U=I.next()).done);h=!0){for(E=U.value,x=function(e){var o=p,s=d.WaveformTable[o],l=0===s.Streaming,u=l?d.memoryHcas[s.MemoryAwbId]:d.streamHcas[s.StreamAwbPortNo][s.StreamAwbId],f=l?d.memoryHcas.config.key:d.streamHcas[s.StreamAwbPortNo].config.key,b=d.CueNameTable.find((function(e){return e.CueIndex===v})).CueName+"_"+e+".wav",m=t.join(a,b);w.push([b,function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(c.decodeHcaToWav(u,r,f,m,n,i));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))}]),p++},F=0;F<E[m];F++)x(F);v++}y.next=38;break;case 34:y.prev=34,y.t0=y["catch"](30),k=!0,g=y.t0;case 38:y.prev=38,y.prev=39,h||null==I.return||I.return();case 41:if(y.prev=41,!k){y.next=44;break}throw g;case 44:return y.finish(41);case 45:return y.finish(38);case 46:return y.abrupt("return",w);case 47:case"end":return y.stop()}}),null,null,[[30,34,38,46],[39,,41,45]])}r.acb2wavs=d,r.acbParse=p},d96e:function(e,r,a){a("99af"),a("cb29"),a("a15b"),a("fb6a"),a("ace4"),a("b0c0"),a("a9e3"),a("d3b7"),a("25f0"),a("cfc3"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7");var t=a("970b"),n=a("5bc3");a("96cf");var o=a("eed9"),i=window.require("path"),c=window.require("buffer").Buffer,s=window.require("fs"),l=o.promisify(s.readFile),u=o.promisify(s.writeFile),f=o.promisify(s.appendFile),d=window.BigInt;function p(e,r,a){if(0===r){for(var t=0;t<128;t++)e[t]=0;return!0}if(1===r){for(var n=[120,95,86,81,78,76,75,73,72,72,71,70,70,69,69,69,68,68,68,68,67,67,67,67,67,67,66,66,66,66,66,66,66,66,65,65,65,65,65,65,65,65,65,65,64,64,64,64,64,64,64,64,64,63,63,63,63,63,63,63,63,63,63,63,63,63,63,62,62,62,62,62,62,61,61,61,61,61,61,61,60,60,60,60,60,60,60,60,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,60,60,60,60,60,60,60,60,61,61,61,61,61,61,61,61,62,62,62,62,62,62,62,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,68,68,68,68,68,68,68,68,68,68,68,68,68,68,69,69,69,69,69,69,69,69,69,69,69,69,70,70,70,70,70,70,70,70,70,70,71,71,71,71,71,71,71,71,71,71,72,72,72,72,72,72,72,72,73,73,73,73,73,73,73,73,74,74,74,74,74,74,74,74,75,75,75,75,75,75,75,76,76,76,76,76,76,77,77,77,77,77,77,78,78,78,78,78,78,79,79,79,79,79,79,80,80,80,80,80,81,81,81,81,81,82,82,82,82,82,83,83,83,83,84,84,84,84,84,85,85,85,85,86,86,86,86,87,87,87,87,87,88,88,88,89,89,89,89,90,90,90,90,91,91,91,91,92,92,92,93,93,93,93,94,94,94,95,95,95,96,96,96,97,97,97,97,98,98,98,99,99,99,100,100,100,101,101,102,102,102,103,103,103,104,104,104,105,105,106,106,106,107,107,107,108,108,109,109,109,110,110,111,111,112,112,112,113,113,114,114,115,115,115,116,116,117,117,118,118,119,119,120,120,120,121,121,122,122,123,123,124,124,125,125,126,126,127,127,128,128,129,129,130,131,131,132,132,133,133,134,134,135,136,136,137,137,138,138,139,140,140,141,141,142,143,143,144,144,145,146,146,147,148,148,149,149,150,151,151,152,153,153,154,155,155,156,157,157,158,159,160,160,161,162,162,163,164,165,165,166,167,167,168,169,170,170,171,172,173,174,174,175,176,177,177,178,179,180,181,182,182,183,184,185,186,186,187,188,189,190,191,192,193,193,194,195,196,197,198,199,200,201,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,237,238,239,240,241,242,243,244,245,247,248,249,250,251,252,253,255,255],o=0,i=0;i<128;i++){var c=o>>>13;if(c>=654){for(var s=128-i,l=0;l<s;l++)e[i+l]=255;break}e[i]=n[c],o+=a}return!0}return!1}function v(e,r){var a=(1&r)<<3|5,t=14&r|1;r>>>=4;for(var n=0;n<16;n++)r=r*a+t&15,e[n]=r}function b(e,r,a,t){if(0===r){for(var n=0;n<256;n++)e[n]=n;return!0}if(1===r){for(var o=0,i=1;i<255;i++)o=13*o+11&255,0!==o&&255!==o||(o=13*o+11&255),e[i]=o;return e[0]=0,e[255]=255,!0}if(56===r){var s=c.alloc(8);a||t--,a--;for(var l=0;l<7;l++)s[l]=255&a,a=a>>>8|t<<24&4294967295,t>>>=8;var u=c.from([s[1],s[1]^s[6],s[2]^s[3],s[2],s[2]^s[1],s[3]^s[4],s[3],s[3]^s[2],s[4]^s[5],s[4],s[4]^s[3],s[5]^s[6],s[5],s[5]^s[4],s[6]^s[1],s[6]]),f=c.alloc(256),d=c.alloc(16),p=c.alloc(16);v(d,s[0]);for(var b=0,m=0;m<16;m++){v(p,u[m]);for(var w=d[m]<<4&255,h=0;h<16;h++)f[b++]=w|p[h]}for(var k=1,g=0,I=0;g<256;g++){I=I+17&255;var U=f[I];0!=U&&255!=U&&(e[k++]=U)}return e[0]=0,e[255]=255,!0}return!1}function m(e,r){for(var a=0;a<r.length;a++)r[a]=e[r[a]]}function w(e,r){for(var a=0,t=[0,32773,32783,10,32795,30,20,32785,32819,54,60,32825,40,32813,32807,34,32867,102,108,32873,120,32893,32887,114,80,32853,32863,90,32843,78,68,32833,32963,198,204,32969,216,32989,32983,210,240,33013,33023,250,33003,238,228,32993,160,32933,32943,170,32955,190,180,32945,32915,150,156,32921,136,32909,32903,130,33155,390,396,33161,408,33181,33175,402,432,33205,33215,442,33195,430,420,33185,480,33253,33263,490,33275,510,500,33265,33235,470,476,33241,456,33229,33223,450,320,33093,33103,330,33115,350,340,33105,33139,374,380,33145,360,33133,33127,354,33059,294,300,33065,312,33085,33079,306,272,33045,33055,282,33035,270,260,33025,33539,774,780,33545,792,33565,33559,786,816,33589,33599,826,33579,814,804,33569,864,33637,33647,874,33659,894,884,33649,33619,854,860,33625,840,33613,33607,834,960,33733,33743,970,33755,990,980,33745,33779,1014,1020,33785,1e3,33773,33767,994,33699,934,940,33705,952,33725,33719,946,912,33685,33695,922,33675,910,900,33665,640,33413,33423,650,33435,670,660,33425,33459,694,700,33465,680,33453,33447,674,33507,742,748,33513,760,33533,33527,754,720,33493,33503,730,33483,718,708,33473,33347,582,588,33353,600,33373,33367,594,624,33397,33407,634,33387,622,612,33377,544,33317,33327,554,33339,574,564,33329,33299,534,540,33305,520,33293,33287,514],n=0;n<r;n++)a=a<<8&65535^t[a>>>8^e[n]];return a}function h(e,r,a){if(void 0===a&&(a=0),!e||e.length<4)return null;var t=0,n={};if(n.magic=e.readUInt32LE(t),t+=4,4277064!==(2139062143&n.magic))return null;if(n.version=e.readUInt16BE(t),t+=2,n.dataOffset=e.readUInt16BE(t),t+=2,n.fmt=e.readUInt32LE(t),t+=4,7630182!==(2139062143&n.fmt))return null;if(n.channelCount=e.readUInt8(t),n.samplingRate=16777215&e.readUInt32BE(t),t+=4,n.blockCount=e.readUInt32BE(t),t+=4,n.muteHeader=e.readUInt16BE(t),t+=2,n.muteFooter=e.readUInt16BE(t),t+=2,!(n.channelCount>=1&&n.channelCount<=16))return null;if(!(n.samplingRate>=1&&n.samplingRate<=8388607))return null;var o=e.readUInt32LE(t);if(t+=4,n.compdec=o,n.blockSize=e.readUInt16BE(t),t+=2,n.r01=e.readUInt8(t),t+=1,n.r02=e.readUInt8(t),t+=1,1886220131===(2139062143&o))n.r03=e.readUInt8(t),t+=1,n.r04=e.readUInt8(t),t+=1,n.r05=e.readUInt8(t),t+=1,n.r06=e.readUInt8(t),t+=1,n.r07=e.readUInt8(t),t+=1,n.r08=e.readUInt8(t),t+=1,n.reserve1=e.readUInt8(t),t+=1,n.reserve2=e.readUInt8(t),t+=1;else{if(6514020!==(2139062143&o))return null;n.count1=e.readUInt8(t),t+=1,n.count2=e.readUInt8(t),t+=1,n.r03=e.readUInt8(t)>>>4&15,n.r04=15&e.readUInt8(t),t+=1,n.enableCount2=e.readUInt8(t),t+=1}if(!(n.blockSize>=1&&n.blockSize<=65535||0===n.blockSize))return null;if(!(n.r01>=0&&n.r01<=n.r02&&n.r02<=31))return null;if(o=e.readUInt32LE(t),t+=4,7496310===(2139062143&o)){if(n.vbr=o,n.vbrPos=t-4,n.vbrR1=e.readUInt16BE(t),t+=2,n.vbrR2=e.readUInt16BE(t),t+=2,!(0===n.blockSize&&n.vbrR1>=0&&n.vbrR2<=511))return null;o=e.readUInt32LE(t),t+=4}if(6845537===(2139062143&o)?(n.ath=o,n.athPos=t-4,n.athType=e.readUInt16BE(t),t+=2,o=e.readUInt32LE(t),t+=4):n.athType=n.version<512?1:0,1886351212===(2139062143&o)){if(n.loop=o,n.loopPos=t-4,n.loopStart=e.readUInt32BE(t),t+=4,n.loopEnd=e.readUInt32BE(t),t+=4,n.loopCount=e.readUInt16BE(t),t+=2,!(n.loopStart>=0&&n.loopStart<=n.loopEnd&&n.loopEnd<=n.blockCount))return null;n.loopR1=e.readUInt16BE(t),t+=2,o=e.readUInt32LE(t),t+=4}if(1752197475===(2139062143&o)){if(n.ciph=o,n.ciphPos=t-4,n.ciphType=e.readUInt16BE(t),t+=2,0!==n.ciphType&&1!==n.ciphType&&56!==n.ciphType)return null;o=e.readUInt32LE(t),t+=4}if(6387314===(2139062143&o)?(n.rva=o,n.rvaPos=t-4,n.volume=e.readFloatBE(t),t+=4,o=e.readUInt32LE(t),t+=4):n.volume=1,1835888483===(2139062143&o)&&(n.comm=o,n.commPos=t-4,n.commLen=e.readUInt8(t),t+=1,n.commLen&&(n.comment=e.slice(t,t+n.commLen).toString(),t+=n.commLen),o=e.readUInt32LE(t),t+=4),6578544===(2139062143&o)&&(n.pad=o,n.padPos=t-4,o=e.readUInt32LE(t),t+=4),n.athTable=c.alloc(128),!p(n.athTable,n.athType,n.samplingRate))return null;var i=0,s=0;return r&&(r=d(r),a&&(r=d(r)*(d(a)<<d("16")|d(2+(65535&~a)&65535))&d("0xFFFFFFFFFFFFFFFF")),i=Number(r&d("0xFFFFFFFF")),s=Number(r>>d("32")&d("0xFFFFFFFF"))),n.ciphTable=c.alloc(256),b(n.ciphTable,n.ciphType,i,s)?n:null}function k(e,r,a,t,n){var o,s,f,d,p,v,k;return regeneratorRuntime.async((function(g){while(1)switch(g.prev=g.next){case 0:if("string"!==typeof e){g.next=5;break}return console.log("Decrypting ".concat(i.parse(e).base,"...")),g.next=4,regeneratorRuntime.awrap(l(e));case 4:e=g.sent;case 5:if("string"===typeof t?(n=t,t=1):void 0===t&&(t=1),o=h(e,r,a),o){g.next=9;break}throw new Error("Not a valid HCA file");case 9:if(e.writeUInt32LE(2139062143&o.magic,0),e.writeUInt32LE(2139062143&o.fmt,8),e.writeUInt32LE(2139062143&o.compdec,24),o.vbr&&e.writeUInt32LE(2139062143&o.vbr,o.vbrPos),o.ath&&e.writeUInt32LE(2139062143&o.ath,o.athPos),o.loop&&e.writeUInt32LE(2139062143&o.loop,o.loopPos),o.ciph&&e.writeUInt32LE(2139062143&o.ciph,o.ciphPos),o.rva&&e.writeUInt32LE(2139062143&o.rva,o.rvaPos),o.comm&&e.writeUInt32LE(2139062143&o.comm,o.commPos),o.pad&&e.writeUInt32LE(2139062143&o.pad,o.padPos),e.writeUInt16BE(t,o.ciphPos+4),e.writeUInt16BE(w(e,o.dataOffset-2),o.dataOffset-2),o.ciphType===t){g.next=39;break}for(s=c.alloc(256),f=c.alloc(256),b(s,1),d=0;d<f.length;d++)f[s[d]]=d;p=o.dataOffset,v=0;case 28:if(!(v<o.blockCount)){g.next=39;break}if(!(p>=e.length)){g.next=31;break}return g.abrupt("break",39);case 31:k=e.slice(p,p+o.blockSize),m(o.ciphTable,k),1===t&&m(f,k),k.writeUInt16BE(w(k,k.length-2),k.length-2),p+=o.blockSize;case 36:v++,g.next=28;break;case 39:if(void 0===n){g.next=42;break}return g.next=42,regeneratorRuntime.awrap(u(n,e));case 42:case"end":return g.stop()}}))}function g(e,r){return r>0?Math.floor(e/r)+(e%r?1:0):0}function I(e){var r=1886220131===(2139062143&e.compdec);if(e.comp={},e.comp.r01=e.r01,e.comp.r02=e.r02,e.comp.r03=e.r03,e.comp.r04=e.r04,e.comp.r05=r?e.r05:e.count1+1,e.comp.r06=r?e.r06:e.enableCount2?e.count2+1:e.count1+1,e.comp.r07=r?e.r07:e.r05-e.r06,e.comp.r08=r?e.r08:0,e.comp.r03||(e.comp.r03=1),1!==e.comp.r01||15!==e.comp.r02)return!1;e.comp.r09=g(e.comp.r05-(e.comp.r06+e.comp.r07),e.comp.r08);var a=c.alloc(16),t=Math.floor(e.channelCount/e.comp.r03);if(e.comp.r07&&t>1)for(var n=0,o=0;o<e.comp.r03;o++){switch(t){case 2:a[n]=1,a[n+1]=2;break;case 3:a[n]=1,a[n+1]=2;break;case 4:a[n]=1,a[n+1]=2,0==e.comp.r04&&(a[n+2]=1,a[n+3]=2);break;case 5:a[n]=1,a[n+1]=2,e.comp.r04<=2&&(a[n+3]=1,a[n+4]=2);break;case 6:a[n]=1,a[n+1]=2,a[n+4]=1,a[n+5]=2;break;case 7:a[n]=1,a[n+1]=2,a[n+4]=1,a[n+5]=2;break;case 8:a[n]=1,a[n+1]=2,a[n+4]=1,a[n+5]=2,a[n+6]=1,a[n+7]=2;break}n+=t}e.channels=[];for(var i=0;i<e.channelCount;i++){var s={};s.block=new Float32Array(128),s.base=new Float32Array(128),s.value=c.alloc(128),s.scale=c.alloc(128),s.value2=c.alloc(8),s.type=a[i],s.value3=s.value.slice(e.comp.r06+e.comp.r07),s.count=e.comp.r06+(2!=a[i]?e.comp.r07:0),s.wav1=new Float32Array(128),s.wav2=new Float32Array(128),s.wav3=new Float32Array(128),s.wave=[new Float32Array(128),new Float32Array(128),new Float32Array(128),new Float32Array(128),new Float32Array(128),new Float32Array(128),new Float32Array(128),new Float32Array(128)],e.channels.push(s)}return!0}r.decryptHca=k;var U=function(){"use strict";function e(r){t(this,e),this.data=r,this.size=8*r.length-16,this.bit=0,this.mask=[16777215,8388607,4194303,2097151,1048575,524287,262143,131071]}return n(e,[{key:"checkBit",value:function(e){var r=0;if(this.bit+e<=this.size){var a=this.bit>>>3;r=this.data[a],r=r<<8|this.data[a+1],r=r<<8|this.data[a+2],r&=this.mask[7&this.bit],r>>>=24-(7&this.bit)-e}return r}},{key:"getBit",value:function(e){var r=this.checkBit(e);return this.bit+=e,r}},{key:"addBit",value:function(e){this.bit+=e}}]),e}();function E(e){for(var r=[],a=c.alloc(4),t=0;t<e.length;t++)a.writeUInt32LE(e[t],0),r[t]=a.readFloatLE(0);return r}var x={scalelist:[14,14,14,14,14,14,13,13,13,13,13,13,12,12,12,12,12,12,11,11,11,11,11,11,10,10,10,10,10,10,10,9,9,9,9,9,9,8,8,8,8,8,8,7,6,6,5,4,4,4,3,3,3,2,2,2,2,0,0,0,0,0,0,0],valueFloat:E([875203878,878919561,882337149,885635518,889611409,892539332,896440592,899609906,903073009,906828511,909902666,913998771,916907413,920543477,924067583,927295274,931365721,934230905,938048568,941329722,944718617,948573397,951581680,955590013,958616079,962174230,965802573,968961101,973124077,975927866,979663725,983054320,986370598,990322530,993266351,997188794,1000329768,1003811675,1007542020,1010632868,1014751213,1017630100,1021285907,1024783600,1028028817,1032075817,1034956558,1038794951,1042048371,1045455668,1049285830,1052310447,1056340545,1059337494,1062914964,1066517459,1069693138,1073833170,1076652183,1080408327,1083771784,1087106069,1091033909,1093993715]),scaleFloat:E([0,1059760811,1053609165,1049774373,1046711865,1044000396,1042123225,1040746633,1032069384,1023543329,1015087620,1006665857,998260768,989863944,981471234,973080577])};function F(e,r,a,t,n){var o=r.getBit(3);if(o>=6)for(var i=0;i<e.count;i++)e.value[i]=r.getBit(6);else if(o){var c,s=r.getBit(6),l=(1<<o)-1,u=l>>>1;e.value[0]=s;for(var f=1;f<e.count;f++)c=r.getBit(o),c!==l?s+=c-u:s=r.getBit(6),e.value[f]=s}else e.value.fill(0);if(2==e.type){if(o=r.checkBit(4),e.value2[0]=o,o<15)for(var d=0;d<8;d++)e.value2[d]=r.getBit(4)}else for(var p=0;p<a;p++)e.value3[p]=r.getBit(6);for(var v=0;v<e.count;v++)o=e.value[v],o&&(o=n[v]+(t+v>>>8)-Math.floor(5*o/2)+1,o=o<0?15:o>=57?1:x.scalelist[o]),e.scale[v]=o;e.scale.fill(0,e.count,128);for(var b=0;b<e.count;b++)e.base[b]=x.valueFloat[e.value[b]]*x.scaleFloat[e.scale[b]]}var y={list1:[0,2,3,3,4,4,4,4,5,6,7,8,9,10,11,12],list2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,3,3,0,0,0,0,0,0,0,0,2,2,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4],list3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,-1,-1,2,-2,0,0,0,0,0,0,0,0,0,0,1,-1,2,-2,3,-3,0,0,0,0,0,0,0,0,0,0,1,1,-1,-1,2,2,-2,-2,3,3,-3,-3,4,-4,0,0,1,1,-1,-1,2,2,-2,-2,3,-3,4,-4,5,-5,0,0,1,1,-1,-1,2,-2,3,-3,4,-4,5,-5,6,-6,0,0,1,-1,2,-2,3,-3,4,-4,5,-5,6,-6,7,-7]};function S(e,r){for(var a=0;a<e.count;a++){var t=void 0,n=e.scale[a],o=y.list1[n],i=r.getBit(o);n<8?(i+=n<<4,r.addBit(y.list2[i]-o),t=y.list3[i]):(i=(1-((1&i)<<1))*Math.floor(i/2),i||r.addBit(-1),t=i),e.block[a]=e.base[a]*t}e.block.fill(0,e.count,128)}var B={listFloat:E([0,0,849391697,852892510,856597562,859705192,863845900,866694869,870370527,873841663,877104501,881127926,884024310,887883545,891109082,894534879,898340290,901381330,905433311,908400984,911997880,915574386,918767309,922884271,925718591,929495131,932831302,936183692,940087311,943063188,947028343,950112175,953631997,957311617,960436122,964599313,967418203,971113819,974558253,977838808,981838531,984750642,988630832,991828334,995272734,999053258,1002110811,1006184794,1009123031,1012739458,1016289835,1019500095,1023593863,1026443572,1030240618,1033549355,1036919948,1040799214,1043791250,1047777936,1050832963,1054371897,1058025948,1061167419,1065353216,1068141862,1071857545,1075275133,1078573502,1082549393,1085477316,1089378576,1092547890,1096010993,1099766495,1102840650,1106936755,1109845397,1113481461,1117005567,1120233258,1124303705,1127168889,1130986552,1134267706,1137656601,1141511381,1144519664,1148527997,1151554063,1155112214,1158740557,1161899085,1166062061,1168865850,1172601709,1175992304,1179308582,1183260514,1186204335,1190126778,1193267752,1196749659,1200480004,1203570852,1207689197,1210568084,1214223891,1217721584,1220966801,1225013801,1227894542,1231732935,1234986355,1238393652,1242223814,1245248431,1249278529,1252275478,1255852948,1259455443,1262631122,1266771154,1269590167,1273346311,1276709768,1280044053,0])};function L(e,r,a,t,n){if(2!==e.type&&a>0){for(var o=0;o<r;o++)for(var i=0,c=t,s=t-1;i<a&&c<n;i++,s--)e.block[c++]=B.listFloat[64+e.value3[o]-e.value[s]]*e.block[s];e.block[127]=0}}var C={listFloat:E([1073741824,1072543451,1071345079,1070146706,1068948334,1067749961,1066551589,1065353216,1062956471,1060559726,1058162981,1054567863,1049774373,1041385765,0,0])};function R(e,r,a,t,n,o){if(1==e.type&&o)for(var i=C.listFloat[r.value2[a]],c=i-2,s=0;s<t;s++)r.block[n+s]=e.block[n+s]*c,e.block[n+s]*=i}var A={list1Float:[E([1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421,1034370421]),E([1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745,1065030846,1062525745]),E([1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963,1065272429,1064630795,1063372184,1061544963]),E([1065333007,1065171628,1064850424,1064372488,1063742424,1062966298,1062051586,1061007097,1065333007,1065171628,1064850424,1064372488,1063742424,1062966298,1062051586,1061007097,1065333007,1065171628,1064850424,1064372488,1063742424,1062966298,1062051586,1061007097,1065333007,1065171628,1064850424,1064372488,1063742424,1062966298,1062051586,1061007097,1065333007,1065171628,1064850424,1064372488,1063742424,1062966298,1062051586,1061007097,1065333007,1065171628,1064850424,1064372488,1063742424,1062966298,1062051586,1061007097,1065333007,1065171628,1064850424,1064372488,1063742424,1062966298,1062051586,1061007097,1065333007,1065171628,1064850424,1064372488,1063742424,1062966298,1062051586,1061007097]),E([1065348163,1065307757,1065227044,1065106216,1064945565,1064745479,1064506439,1064229022,1063913895,1063561817,1063173637,1062750291,1062292797,1061802258,1061279856,1060726850,1065348163,1065307757,1065227044,1065106216,1064945565,1064745479,1064506439,1064229022,1063913895,1063561817,1063173637,1062750291,1062292797,1061802258,1061279856,1060726850,1065348163,1065307757,1065227044,1065106216,1064945565,1064745479,1064506439,1064229022,1063913895,1063561817,1063173637,1062750291,1062292797,1061802258,1061279856,1060726850,1065348163,1065307757,1065227044,1065106216,1064945565,1064745479,1064506439,1064229022,1063913895,1063561817,1063173637,1062750291,1062292797,1061802258,1061279856,1060726850]),E([1065351953,1065341847,1065321643,1065291352,1065250992,1065200588,1065140169,1065069773,1064989442,1064899224,1064799173,1064689350,1064569821,1064440658,1064301939,1064153747,1063996172,1063829308,1063653256,1063468122,1063274017,1063071059,1062859370,1062639077,1062410313,1062173215,1061927928,1061674597,1061413376,1061144423,1060867899,1060583971,1065351953,1065341847,1065321643,1065291352,1065250992,1065200588,1065140169,1065069773,1064989442,1064899224,1064799173,1064689350,1064569821,1064440658,1064301939,1064153747,1063996172,1063829308,1063653256,1063468122,1063274017,1063071059,1062859370,1062639077,1062410313,1062173215,1061927928,1061674597,1061413376,1061144423,1060867899,1060583971]),E([1065352900,1065350374,1065345321,1065337743,1065327640,1065315015,1065299869,1065282205,1065262025,1065239331,1065214129,1065186420,1065156211,1065123504,1065088305,1065050620,1065010454,1064967812,1064922702,1064875131,1064825104,1064772631,1064717719,1064660375,1064600610,1064538431,1064473848,1064406871,1064337510,1064265776,1064191678,1064115229,1064036440,1063955323,1063871889,1063786152,1063698124,1063607819,1063515251,1063420432,1063323378,1063224103,1063122622,1063018951,1062913104,1062805098,1062694950,1062582675,1062468291,1062351814,1062233263,1062112656,1061990009,1061865343,1061738675,1061610026,1061479413,1061346857,1061212378,1061075995,1060937731,1060797604,1060655638,1060511852])],list2Float:[E([3171584980,1024101332,1024101332,3171584980,1024101332,3171584980,3171584980,1024101332,1024101332,3171584980,3171584980,1024101332,3171584980,1024101332,1024101332,3171584980,1024101332,3171584980,3171584980,1024101332,3171584980,1024101332,1024101332,3171584980,3171584980,1024101332,1024101332,3171584980,1024101332,3171584980,3171584980,1024101332,1024101332,3171584980,3171584980,1024101332,3171584980,1024101332,1024101332,3171584980,3171584980,1024101332,1024101332,3171584980,1024101332,3171584980,3171584980,1024101332,3171584980,1024101332,1024101332,3171584980,1024101332,3171584980,3171584980,1024101332,1024101332,3171584980,3171584980,1024101332,3171584980,1024101332,1024101332,3171584980]),E([3192374722,3205380570,1044891074,1057896922,1044891074,1057896922,3192374722,3205380570,1044891074,1057896922,3192374722,3205380570,3192374722,3205380570,1044891074,1057896922,1044891074,1057896922,3192374722,3205380570,3192374722,3205380570,1044891074,1057896922,3192374722,3205380570,1044891074,1057896922,1044891074,1057896922,3192374722,3205380570,1044891074,1057896922,3192374722,3205380570,3192374722,3205380570,1044891074,1057896922,3192374722,3205380570,1044891074,1057896922,1044891074,1057896922,3192374722,3205380570,3192374722,3205380570,1044891074,1057896922,1044891074,1057896922,3192374722,3205380570,1044891074,1057896922,3192374722,3205380570,3192374722,3205380570,1044891074,1057896922]),E([3184049462,3197411377,3203488490,3206703001,1036565814,1049927729,1056004842,1059219353,1036565814,1049927729,1056004842,1059219353,3184049462,3197411377,3203488490,3206703001,1036565814,1049927729,1056004842,1059219353,3184049462,3197411377,3203488490,3206703001,3184049462,3197411377,3203488490,3206703001,1036565814,1049927729,1056004842,1059219353,1036565814,1049927729,1056004842,1059219353,3184049462,3197411377,3203488490,3206703001,3184049462,3197411377,3203488490,3206703001,1036565814,1049927729,1056004842,1059219353,3184049462,3197411377,3203488490,3206703001,1036565814,1049927729,1056004842,1059219353,1036565814,1049927729,1056004842,1059219353,3184049462,3197411377,3203488490,3206703001]),E([3175676720,3189129347,3195588556,3198975188,3202017408,3204684861,3206053824,3207326538,1028193072,1041645699,1048104908,1051491540,1054533760,1057201213,1058570176,1059842890,1028193072,1041645699,1048104908,1051491540,1054533760,1057201213,1058570176,1059842890,3175676720,3189129347,3195588556,3198975188,3202017408,3204684861,3206053824,3207326538,1028193072,1041645699,1048104908,1051491540,1054533760,1057201213,1058570176,1059842890,3175676720,3189129347,3195588556,3198975188,3202017408,3204684861,3206053824,3207326538,3175676720,3189129347,3195588556,3198975188,3202017408,3204684861,3206053824,3207326538,1028193072,1041645699,1048104908,1051491540,1054533760,1057201213,1058570176,1059842890]),E([3167292080,3180767493,3187323507,3190755490,3193986067,3196620435,3198196453,3199747114,3201268682,3202757493,3204209959,3205035419,3205720106,3206381521,3207018070,3207628219,1019808432,1033283845,1039839859,1043271842,1046502419,1049136787,1050712805,1052263466,1053785034,1055273845,1056726311,1057551771,1058236458,1058897873,1059534422,1060144571,1019808432,1033283845,1039839859,1043271842,1046502419,1049136787,1050712805,1052263466,1053785034,1055273845,1056726311,1057551771,1058236458,1058897873,1059534422,1060144571,3167292080,3180767493,3187323507,3190755490,3193986067,3196620435,3198196453,3199747114,3201268682,3202757493,3204209959,3205035419,3205720106,3206381521,3207018070,3207628219]),E([3158904464,3172385580,3178965876,3182409344,3185687598,3188313990,3189943222,3191566031,3193181441,3194788479,3196222912,3197016610,3197804678,3198586642,3199362031,3200130378,3200891219,3201644097,3202388559,3203124155,3203850443,3204507620,3204860802,3205208683,3205551053,3205887705,3206218438,3206543051,3206861349,3207173141,3207478238,3207776457,1011420816,1024901932,1031482228,1034925696,1038203950,1040830342,1042459574,1044082383,1045697793,1047304831,1048739264,1049532962,1050321030,1051102994,1051878383,1052646730,1053407571,1054160449,1054904911,1055640507,1056366795,1057023972,1057377154,1057725035,1058067405,1058404057,1058734790,1059059403,1059377701,1059689493,1059994590,1060292809]),E([3150516104,3163998646,3170585018,3174031367,3177321577,3179945994,3181588620,3183229635,3184868793,3186505846,3187905794,3188721847,3189536478,3190349564,3191160984,3191970615,3192778336,3193584023,3194387558,3195188817,3195987681,3196421838,3196818695,3197214173,3197608215,3198000760,3198391749,3198781124,3199168826,3199554796,3199938976,3200321310,3200701737,3201080203,3201456649,3201831019,3202203257,3202573306,3202941111,3203306617,3203669767,3204030509,3204388786,3204596401,3204772996,3204948278,3205122221,3205294800,3205465988,3205635760,3205804089,3205970951,3206136320,3206300172,3206462482,3206623225,3206782377,3206939914,3207095813,3207250050,3207402601,3207553445,3207702557,3207849916])],list3Float:E([976553200,989955e3,997246264,1002148456,1006938121,1009811968,1013000268,1015758615,1017657746,1019707325,1021907216,1023834061,1025085380,1026413404,1027819075,1029303489,1030867880,1032156190,1033020435,1033926836,1034876194,1035869342,1036907131,1037990429,1039120109,1040242219,1040854746,1041491754,1042153649,1042840818,1043553621,1044292385,1045057397,1045848895,1046667063,1047512017,1048383800,1048929186,1049391799,1049867617,1050356463,1050858095,1051372203,1051898402,1052436230,1052985143,1053544509,1054113606,1054691624,1055277660,1055870719,1056469719,1057019049,1057322698,1057627451,1057932616,1058237477,1058541298,1058843330,1059142818,1059439013,1059731175,1060018584,1060300549,3208060062,3208329214,3208591090,3208845184,3209091046,3209328292,3209556604,3209775727,3209985477,3210185731,3210376430,3210557575,3210729223,3210891482,3211044505,3211188488,3211323662,3211450289,3211568657,3211679074,3211781863,3211877359,3211965905,3212047846,3212123529,3212193299,3212257495,3212316448,3212370484,3212419916,3212465047,3212506169,3212543560,3212577486,3212608200,3212635942,3212660939,3212683406,3212703543,3212721542,3212737578,3212751820,3212764423,3212775532,3212785283,3212793802,3212801206,3212807606,3212813102,3212817787,3212821750,3212825069,3212827821,3212830073,3212831888,3212833326,3212834440,3212835280,3212835890,3212836314,3212836589,3212836751,3212836831,3212836860])};function T(e,r){for(var a=e.block,t=e.wav1,n=0,o=1,i=64;n<7;n++,o<<=1,i>>>=1){for(var c=0,s=0,l=i,u=0;u<o;u++){for(var f=0;f<i;f++){var d=a[c++],p=a[c++];t[s++]=p+d,t[l++]=d-p}s+=i,l+=i}var v=a;a=t,t=v}a=e.wav1,t=e.block;for(var b=0,m=64,w=1;b<7;b++,m>>>=1,w<<=1){for(var h=A.list1Float[b],k=A.list2Float[b],g=0,I=0,U=0,E=w,x=0,F=2*w-1,y=0;y<m;y++){for(var S=0;S<w;S++){var B=a[U++],L=a[E++],C=h[g++],R=k[I++];t[x++]=B*C-L*R,t[F--]=B*R+L*C}U+=w,E+=w,x+=w,F+=3*w}var T=a;a=t,t=T}t=e.wav2;for(var z=0;z<128;z++)t[z]=a[z];a=A.list3Float,t=e.wave[r];for(var P=e.wav2,H=e.wav3,N=0;N<64;N++)t[N]=P[64+N]*a[N]+H[N];for(var O=0;O<64;O++)t[64+O]=a[64+O]*P[127-O]-H[64+O];for(var M=0;M<64;M++)H[M]=P[63-M]*a[127-M];for(var W=0;W<64;W++)H[64+W]=a[63-W]*P[W]}function z(e,r,a){var t=r.slice(a,a+e.blockSize);if(w(t,e.blockSize))return!1;e.ciphType&&m(e.ciphTable,t);var n=new U(t),o=n.getBit(16);if(65535===o){for(var i=(n.getBit(9)<<8)-n.getBit(7),c=e.comp,s=0;s<e.channelCount;s++)F(e.channels[s],n,c.r09,i,e.athTable);for(var l=0;l<8;l++){for(var u=0;u<e.channelCount;u++)S(e.channels[u],n);for(var f=0;f<e.channelCount;f++)L(e.channels[f],c.r09,c.r08,c.r07+c.r06,c.r05);for(var d=0;d<e.channelCount-1;d++)R(e.channels[d],e.channels[d+1],l,c.r05-c.r06,c.r06,c.r07);for(var p=0;p<e.channelCount;p++)T(e.channels[p],l)}}return!0}function P(e,r,a,t){var n,o,i,c,s,u,f,d;return regeneratorRuntime.async((function(p){while(1)switch(p.prev=p.next){case 0:if(void 0!==t&&null!==t||(t=1),"string"!==typeof e){p.next=5;break}return p.next=4,regeneratorRuntime.awrap(l(e));case 4:e=p.sent;case 5:if(n=h(e,r,a),n){p.next=8;break}throw new Error("Not HCA File");case 8:if(I(n)){p.next=10;break}throw new Error("Init Decode Failed");case 10:o=0,i=n.dataOffset,c=new Float32Array(8*n.blockCount*128*n.channelCount),s=0;case 13:if(!(s<n.blockCount)){p.next=20;break}if(z(n,e,i)){p.next=16;break}throw new Error("Decode Error");case 16:for(u=0;u<8;u++)for(f=0;f<128;f++)for(d=0;d<n.channelCount;d++)c[o++]=n.channels[d].wave[u][f]*n.volume*t;case 17:s++,i+=n.blockSize,p.next=13;break;case 20:return n.pcmData=c,p.abrupt("return",n);case 22:case"end":return p.stop()}}))}function H(e,r,a,t,n){var o,i,s,l,d,p,v,b;return regeneratorRuntime.async((function(m){while(1)switch(m.prev=m.next){case 0:return o=c.alloc(36),o.write("RIFF",0),o.write("WAVEfmt ",8),o.writeUInt32LE(16,16),i=c.alloc(8),i.write("data",0),s={},s.fmtType=r>0?1:3,s.fmtChannelCount=a,s.fmtBitCount=r>0?r:32,s.fmtSamplingRate=t,s.fmtSamplingSize=Math.floor(s.fmtBitCount/8*s.fmtChannelCount),s.fmtSamplesPerSec=s.fmtSamplingRate*s.fmtSamplingSize,o.writeUInt16LE(s.fmtType,20),o.writeUInt16LE(s.fmtChannelCount,22),o.writeUInt32LE(s.fmtSamplingRate,24),o.writeUInt32LE(s.fmtSamplesPerSec,28),o.writeUInt32LE(s.fmtSamplingSize,32),o.writeUInt16LE(s.fmtBitCount,34),s.dataSize=Math.floor(n.length*s.fmtSamplingSize/a),s.riffSize=28+i.length+s.dataSize,i.writeUInt32LE(s.dataSize,4),o.writeUInt32LE(s.riffSize,4),m.next=25,regeneratorRuntime.awrap(u(e,c.concat([o,i])));case 25:l=c.alloc(1048575),d=0,p=0,v=0;case 28:if(!(v<n.length)){m.next=57;break}b=n[v],b>1?b=1:b<-1&&(b=-1),m.t0=r,m.next=0===m.t0?34:8===m.t0?37:16===m.t0?40:24===m.t0?43:32===m.t0?46:49;break;case 34:return l.writeFloatLE(b,d),d+=4,m.abrupt("break",49);case 37:return l.writeInt8(Math.floor(127*b)+128,d),d+=1,m.abrupt("break",49);case 40:return l.writeInt16LE(Math.floor(32767*b),d),d+=2,m.abrupt("break",49);case 43:return l.writeInt32LE(Math.floor(8388607*b),d),d+=3,m.abrupt("break",49);case 46:return l.writeInt32LE(Math.floor(2147483647*b),d),d+=4,m.abrupt("break",49);case 49:if(0===p&&(p=d),!(d+p>l.length)){m.next=54;break}return m.next=53,regeneratorRuntime.awrap(f(e,l.slice(0,d)));case 53:d=0;case 54:v++,m.next=28;break;case 57:if(!(d>0)){m.next=60;break}return m.next=60,regeneratorRuntime.awrap(f(e,l.slice(0,d)));case 60:case"end":return m.stop()}}))}function N(e,r,a,t,n,o){var c,s;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:return void 0!==o&&null!==o||(o=16),"string"===typeof e&&(c=i.parse(e),console.log("Reading ".concat(c.base,"...")),void 0===t&&(t=i.join(c.dir,c.name+".wav"))),l.next=4,regeneratorRuntime.awrap(P(e,r,a,n));case 4:return s=l.sent,l.next=7,regeneratorRuntime.awrap(H(t,o,s.channelCount,s.samplingRate,s.pcmData));case 7:case"end":return l.stop()}}))}r.decodeHca=P,r.writeWavFile=H,r.decodeHcaToWav=N}}]);
//# sourceMappingURL=chunk-2c1d74fc.e8dd2c17.js.map