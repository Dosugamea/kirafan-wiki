{"version":3,"sources":["webpack:///./src/views/Standpic/index.vue?779b","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///src/views/Standpic/index.vue","webpack:///./src/views/Standpic/index.vue?e62f","webpack:///./src/views/Standpic/index.vue","webpack:///./node_modules/core-js/modules/es.symbol.replace.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","model","value","callback","$$v","dialog","expression","isLoadingDb","on","$event","loadAssetBundle","characters","map","item","i","text","m_ADVCharaID","characterID","poses","poseID","staticStyle","faces","key","faceID","loading","$const","sites","standpic","format","base","scale","downloadImg","style","height","id","transform","_m","staticRenderFns","_isNativeFunction","fn","Function","toString","call","indexOf","isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","e","_construct","Parent","args","Class","a","push","apply","Constructor","bind","instance","setPrototypeOf","arguments","_wrapNativeSuper","_cache","Map","undefined","isNativeFunction","TypeError","has","get","set","Wrapper","getPrototypeOf","constructor","Object","create","enumerable","writable","configurable","name","props","data","index","downloading","computed","$db","ADVCharacterListArray","filter","character","m_Datas","pose","face","m_ResourceBaseName","toLowerCase","base_row","faceContainerSize","src","width","position","left","m_FaceX","top","m_FaceY","methods","toBlob","Promise","CanvasElement","resolve","reject","imgOnload","fileDownloadFromBlob","link","href","url","download","fileName","click","URL","revokeObjectURL","standpicDB","standpicPath","watch","load","showImg","mounted","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VDialog","VDivider","VIcon","VListItem","VListItemAction","VListItemTitle","VList","VOverlay","VProgressCircular","VRow","VSelect","VSpacer","defineWellKnownSymbol"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,8BAA8B,CAACN,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,GAAG,gBAAgBL,EAAG,QAAQ,CAACM,MAAM,CAAC,QAAU,WAAW,CAACN,EAAG,WAAW,CAACM,MAAM,CAAC,YAAY,OAAOC,MAAM,CAACC,MAAOZ,EAAU,OAAEa,SAAS,SAAUC,GAAMd,EAAIe,OAAOD,GAAKE,WAAW,WAAW,CAAGhB,EAAIiB,YAA6bb,EAAG,SAAS,CAACA,EAAG,eAAe,CAACE,YAAY,WAAW,CAACN,EAAIO,GAAG,iBAAiBH,EAAG,sBAAsB,CAACE,YAAY,OAAOI,MAAM,CAAC,cAAgB,OAAO,IAAI,GAA/kBN,EAAG,SAAS,CAACA,EAAG,eAAe,CAACE,YAAY,WAAW,CAACN,EAAIO,GAAG,oBAAoBH,EAAG,cAAc,CAACJ,EAAIO,GAAG,yBAAyBH,EAAG,iBAAiB,CAACA,EAAG,YAAYA,EAAG,QAAQ,CAACM,MAAM,CAAC,MAAQ,iBAAiB,KAAO,IAAIQ,GAAG,CAAC,MAAQ,SAASC,GAAQnB,EAAIe,QAAS,KAAS,CAACf,EAAIO,GAAG,QAAQH,EAAG,QAAQ,CAACM,MAAM,CAAC,MAAQ,iBAAiB,KAAO,IAAIQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOnB,EAAIoB,qBAAqB,CAACpB,EAAIO,GAAG,UAAU,IAAI,IAAsK,IAAI,GAAGH,EAAG,QAAQ,CAACM,MAAM,CAAC,aAAa,KAAK,CAACN,EAAG,QAAQ,CAACM,MAAM,CAAC,KAAO,KAAK,GAAK,KAAK,GAAK,MAAM,CAACN,EAAG,WAAW,CAACE,YAAY,OAAOI,MAAM,CAAC,MAAQV,EAAIS,GAAG,aAAe,KAAQT,EAAIqB,WAAiB,OAAI,IAAI,MAAQ,GAAG,MAAQrB,EAAIqB,WAAWC,KAAI,SAAUC,EAAMC,GAAK,MAAO,CAAGC,KAAMF,EAAKG,aAAcd,MAAOY,OAAUb,MAAM,CAACC,MAAOZ,EAAe,YAAEa,SAAS,SAAUC,GAAMd,EAAI2B,YAAYb,GAAKE,WAAW,kBAAkB,GAAGZ,EAAG,QAAQ,CAACM,MAAM,CAAC,KAAO,KAAK,GAAK,IAAI,GAAK,MAAM,CAACN,EAAG,WAAW,CAACE,YAAY,OAAOI,MAAM,CAAC,MAAQV,EAAIS,GAAG,QAAU,KAAQT,EAAI4B,MAAY,OAAI,IAAI,MAAQ,GAAG,MAAQ5B,EAAI4B,MAAMN,KAAI,SAAUC,EAAMC,GAAK,MAAO,CAAGC,KAAMD,EAAGZ,MAAOY,OAAUb,MAAM,CAACC,MAAOZ,EAAU,OAAEa,SAAS,SAAUC,GAAMd,EAAI6B,OAAOf,GAAKE,WAAW,aAAa,GAAGZ,EAAG,QAAQ,CAAC0B,YAAY,CAAC,SAAW,YAAYpB,MAAM,CAAC,KAAO,KAAK,GAAK,IAAI,GAAK,MAAM,CAACN,EAAG,WAAW,CAACE,YAAY,OAAOI,MAAM,CAAC,MAAQV,EAAIS,GAAG,QAAU,KAAQT,EAAI+B,MAAY,OAAI,IAAI,MAAQ,GAAG,MAAQ/B,EAAI+B,MAAMT,KAAI,SAAUC,EAAMC,GAAK,MAAO,CAAGC,KAAO,GAAMF,EAAKS,IAAI,GAAMpB,MAAOY,OAAUb,MAAM,CAACC,MAAOZ,EAAU,OAAEa,SAAS,SAAUC,GAAMd,EAAIiC,OAAOnB,GAAKE,WAAW,YAAYZ,EAAG,YAAY,CAACM,MAAM,CAAC,SAAW,GAAG,MAAQV,EAAIkC,QAAQ,QAAU,MAAM,CAAC9B,EAAG,sBAAsB,CAACM,MAAM,CAAC,cAAgB,GAAG,MAAQ,cAAc,IAAI,IAAI,GAAGN,EAAG,cAAc,CAACM,MAAM,CAAC,OAAS,SAAS,KAAOV,EAAImC,OAAOC,MAAMC,SAASC,OAAOtC,EAAIuC,QAAQ,CAACnC,EAAG,oBAAoB,CAACE,YAAY,iBAAiB,CAACN,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIuC,MAAM,MAAMvC,EAAIQ,GAAGR,EAAIS,GAAG,oBAAoBL,EAAG,qBAAqB,CAACE,YAAY,QAAQ,CAACF,EAAG,SAAS,CAACJ,EAAIO,GAAG,sBAAsB,IAAI,GAAGH,EAAG,YAAY,CAACE,YAAY,SAASF,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,QAAQ,CAACE,YAAY,OAAOI,MAAM,CAAC,KAAO,IAAIQ,GAAG,CAAC,MAAQ,SAASC,GAAQnB,EAAIwC,OAAS,MAAO,CAACpC,EAAG,SAAS,CAACJ,EAAIO,GAAG,wBAAwB,GAAGH,EAAG,QAAQ,CAACE,YAAY,OAAOI,MAAM,CAAC,KAAO,IAAIQ,GAAG,CAAC,MAAQ,SAASC,GAAQnB,EAAIwC,MAAQ,KAAK,CAACpC,EAAG,SAAS,CAACJ,EAAIO,GAAG,wBAAwB,GAAGH,EAAG,QAAQ,CAACE,YAAY,OAAOI,MAAM,CAAC,KAAO,IAAIQ,GAAG,CAAC,MAAQ,SAASC,GAAQnB,EAAIwC,OAAS,MAAO,CAACpC,EAAG,SAAS,CAACJ,EAAIO,GAAG,uBAAuB,GAAIP,EAAe,YAAEI,EAAG,sBAAsB,CAACE,YAAY,YAAYI,MAAM,CAAC,cAAgB,GAAG,KAAO,KAAK,MAAQ,OAAON,EAAG,QAAQ,CAACE,YAAY,OAAOI,MAAM,CAAC,KAAO,IAAIQ,GAAG,CAAC,MAAQlB,EAAIyC,cAAc,CAACrC,EAAG,SAAS,CAACJ,EAAIO,GAAG,mBAAmB,IAAI,GAAGH,EAAG,MAAM,CAAC0B,YAAY,CAAC,MAAQ,OAAO,SAAW,SAAS,SAAW,YAAYY,MAAM,CAAGC,OAAoB,KAAZ3C,EAAIwC,MAAe,OAAS,CAACpC,EAAG,MAAM,CAAC0B,YAAY,CAAC,SAAW,WAAW,KAAO,MAAM,UAAY,qBAAqB,CAAC1B,EAAG,MAAM,CAAC4B,IAAIhC,EAAI4C,GAAGF,MAAM,CAAGG,UAAY,SAAW7C,EAAIwC,MAAQ,gBAAsC,IAAjBxC,EAAIwC,MAAQ,GAAWxC,EAAIwC,MAAS,OAAU,CAACxC,EAAI8C,GAAG,UAAU,IACvoHC,EAAkB,CAAC,WAAa,IAAI/C,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,SAAS,CAACE,YAAY,iB,gTCD7J,SAAS0C,EAAkBC,GACxC,OAAgE,IAAzDC,SAASC,SAASC,KAAKH,GAAII,QAAQ,iB,UCC5C,SAASC,IACP,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAC,KAAKC,UAAUT,SAASC,KAAKG,QAAQC,UAAUG,KAAM,IAAI,iBAClD,EACP,MAAOE,GACP,OAAO,GAII,SAASC,EAAWC,EAAQC,EAAMC,GAc/C,OAZEH,EADER,IACWC,QAAQC,UAER,SAAoBO,EAAQC,EAAMC,GAC7C,IAAIC,EAAI,CAAC,MACTA,EAAEC,KAAKC,MAAMF,EAAGF,GAChB,IAAIK,EAAcnB,SAASoB,KAAKF,MAAML,EAAQG,GAC1CK,EAAW,IAAIF,EAEnB,OADIJ,GAAOO,eAAeD,EAAUN,EAAML,WACnCW,GAIJT,EAAWM,MAAM,KAAMK,WCzBjB,SAASC,EAAiBT,GACvC,IAAIU,EAAwB,oBAARC,IAAqB,IAAIA,SAAQC,EA8BrD,OA5BAH,EAAmB,SAA0BT,GAC3C,GAAc,OAAVA,IAAmBa,EAAiBb,GAAQ,OAAOA,EAEvD,GAAqB,oBAAVA,EACT,MAAM,IAAIc,UAAU,sDAGtB,GAAsB,qBAAXJ,EAAwB,CACjC,GAAIA,EAAOK,IAAIf,GAAQ,OAAOU,EAAOM,IAAIhB,GAEzCU,EAAOO,IAAIjB,EAAOkB,GAGpB,SAASA,IACP,OAAO3B,EAAUS,EAAOQ,UAAWW,eAAenF,MAAMoF,aAW1D,OARAF,EAAQvB,UAAY0B,OAAOC,OAAOtB,EAAML,UAAW,CACjDyB,YAAa,CACXzE,MAAOuE,EACPK,YAAY,EACZC,UAAU,EACVC,cAAc,KAGXlB,eAAeW,EAASlB,IAG1BS,EAAiBT,G,k4BCsD1B,OACE0B,KAAM,WACNC,MAAO,CAAC,MACRC,KAHF,WAII,MAAO,CACLC,MAAO,GACP5D,QAAS,EACTL,OAAQ,EACRI,OAAQ,EACRO,MAAO,EACPb,YAAa,EACboE,aAAa,EACb9E,aAAa,EAEbF,QAAQ,IAGZiF,SAAU,CACR3E,WADJ,WACA,WACM,OAAOpB,KAAKgG,IAAIC,sBAAsBC,QAAO,SAAnD,UACA,qBACA,cACA,mCAGIC,UARJ,WASM,OAAOnG,KAAKoB,WAAWpB,KAAK0B,cAE9BC,MAXJ,WAYM,OAAO3B,KAAKmG,UAAUC,SAExBtE,MAdJ,WAcA,WACM,OAAO9B,KAAK6F,MAAMK,QACxB,YAAQ,MAAR,yCAGIG,KAnBJ,WAoBM,OAAOrG,KAAK2B,MAAM3B,KAAK4B,SAEzB0E,KAtBJ,WAuBM,OAAOtG,KAAK8B,MAAM9B,KAAKgC,SAEzBM,KAzBJ,WA0BM,OAAOtC,KAAKmG,UAAUI,mBAAmBC,eAE3CC,SA5BJ,WA6BM,OAAOzG,KAAKmG,UAAUI,oBAExBG,kBAAmB,WAAvB,YAEIC,IAjCJ,WAkCM,MAAO,CACLvE,SACR,kBACA,oBACA,kCACA,wBACA,IACA,wBACA,eACA,cACA,kBACQkE,KACR,mBACA,6BACA,kCACA,UACA,IACA,UACA,SACA,YACA,MACA,yDACA,aACA,IACA,cACA,SACA,YACA,KAEA,6BACA,aAEA,8BAAU,OAAV,mBACA,SAGI7D,MAtEJ,WAuEM,MAAO,CACLmE,MAAO5G,KAAK0G,kBAAoB,KAChChE,OAAQ1C,KAAK0G,kBAAoB,KACjCG,SAAU,WACVC,KAAM9G,KAAKqG,KAAKU,QAAU/G,KAAK0G,kBAAoB,EAAI,KACvDM,IAAKhH,KAAKqG,KAAKY,QAAUjH,KAAK0G,kBAAoB,EAAI,QAI5DQ,QAAS,CACP,KADJ,iHAEA,gBAEA,+BACA,8BACA,YACA,iBACA,WACA,SACA,6BAGA,gDACA,gDAdA,kCAeA,gBAfA,OAgBA,eAhBA,gDAkBI,gBAlBJ,wGAmBA,qBAGA,wBAtBA,gBAuBA,uBAvBA,+DA0BA,wDACA,uBA3BA,OAyBA,EAzBA,OA6BA,KA7BA,OA+BA,KAEA,EACA,+DAEA,qBACA,aACA,SACA,YACA,gEADA,iBAGA,gBACA,eACA,gBAEA,OACA,SAEA,sBACA,qBAEA,6BAEA,sBACA,YACA,oBACA,eAzDA,iDA2DI,QA3DJ,uHA4DA,eACA,YACA,YACA,wCAIA,6BACA,wCACA,MAEA,KAvEA,kCA0EA,gBA1EA,gDA4EA,2BACA,0CACA,gBACA,kBACA,yBACA,mBACA,GACA,YACA,EACA,yBACA,2BAGA,gBAzFA,gDA4FI,YA5FJ,4GA6FA,oBACA,sCA9FA,kCA+FA,gBA/FA,OA+FA,EA/FA,OAgGA,0BACA,EACA,0FACA,QAEA,oBArGA,gDAwGIC,OAxGJ,SAwGA,GACM,OAAO,IAAIC,SAAQ,SAAzB,KACQ,IACEC,EAAcF,OAAOG,GAC/B,SACUC,EAAO3D,QAKb4D,UAlHJ,SAkHA,KAEM,OAAO,IAAIJ,SAAQ,SAAzB,oGACA,gCACA,mCAFA,kCAGA,kCAHA,OAGA,EAHA,OAGA,KACA,6BAJA,yCAOIK,qBA3HJ,SA2HA,0EACA,yBACA,8BACMC,EAAKC,KAAOC,EACZF,EAAKG,SAAWC,EAChBJ,EAAKK,QACLC,IAAIC,gBAAgBL,IAEtBM,WAnIJ,WAoIM,OAAOlI,KAAKgG,IAAIkC,YAElBC,aAtIJ,WAuIM,IACE,OAAOnI,KAAKkI,aAAalI,KAAKsC,MAAM6F,cAAgB,GAC5D,SACQ,MAAO,MAIbC,MAAO,CACLzF,GADJ,WAEM3C,KAAK0B,YAAc,GAErBY,KAJJ,WAKMtC,KAAKqI,QAEPrG,OAPJ,WAQMhC,KAAKsI,YAGTC,QA1PF,WA2PQvI,KAAKkI,aACPlI,KAAKqI,OACX,wBACMrI,KAAKmB,kBAELnB,KAAKc,QAAS,ICzV0U,I,qNCO1V0H,EAAY,eACd,EACA1I,EACAgD,GACA,EACA,KACA,KACA,MAIa,aAAA0F,EAAiB,QAqBhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,QAAA,KAAMC,aAAA,OAAaC,UAAA,OAAUC,WAAA,OAAWC,OAAA,KAAKC,UAAA,KAAQC,WAAA,KAASC,QAAA,KAAMC,YAAA,KAAUC,kBAAA,KAAgBC,eAAAC,EAAA,KAAeC,WAAA,KAASC,oBAAA,KAAkBC,OAAA,KAAKC,UAAA,KAAQC,UAAA,Q,uBCvCxL,IAAIC,EAAwB,EAAQ,QAIpCA,EAAsB","file":"js/chunk-854b32ce.7f99249d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"display px-4 primary--text\"},[_vm._v(_vm._s(_vm.$t('Standpic')))]),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-dialog',{attrs:{\"max-width\":\"290\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[(!_vm.isLoadingDb)?_c('v-card',[_c('v-card-title',{staticClass:\"text-h5\"},[_vm._v(\"DBをダウンロードしますか?\")]),_c('v-card-text',[_vm._v(\"この処理には時間がかかることがあります\")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"green darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"No\")]),_c('v-btn',{attrs:{\"color\":\"green darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.loadAssetBundle()}}},[_vm._v(\"Yes\")])],1)],1):_c('v-card',[_c('v-card-title',{staticClass:\"text-h5\"},[_vm._v(\"DBダウンロード中... \"),_c('v-progress-circular',{staticClass:\"ml-3\",attrs:{\"indeterminate\":\"\"}})],1)],1)],1)],1),_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"lg\":\"6\"}},[_c('v-select',{staticClass:\"px-4\",attrs:{\"label\":_vm.$t('Character') + \" (\" + (_vm.characters.length) + \")\",\"dense\":\"\",\"items\":_vm.characters.map(function (item, i) { return ({ text: item.m_ADVCharaID, value: i }); })},model:{value:(_vm.characterID),callback:function ($$v) {_vm.characterID=$$v},expression:\"characterID\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"lg\":\"3\"}},[_c('v-select',{staticClass:\"px-4\",attrs:{\"label\":_vm.$t('Pose') + \" (\" + (_vm.poses.length) + \")\",\"dense\":\"\",\"items\":_vm.poses.map(function (item, i) { return ({ text: i, value: i }); })},model:{value:(_vm.poseID),callback:function ($$v) {_vm.poseID=$$v},expression:\"poseID\"}})],1),_c('v-col',{staticStyle:{\"position\":\"relative\"},attrs:{\"cols\":\"12\",\"sm\":\"6\",\"lg\":\"3\"}},[_c('v-select',{staticClass:\"px-4\",attrs:{\"label\":_vm.$t('Face') + \" (\" + (_vm.faces.length) + \")\",\"dense\":\"\",\"items\":_vm.faces.map(function (item, i) { return ({ text: (\"\" + (item.key[2])), value: i }); })},model:{value:(_vm.faceID),callback:function ($$v) {_vm.faceID=$$v},expression:\"faceID\"}}),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":_vm.loading,\"opacity\":\"0\"}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1)],1)],1),_c('v-list-item',{attrs:{\"target\":\"_blank\",\"href\":_vm.$const.sites.standpic.format(_vm.base)}},[_c('v-list-item-title',{staticClass:\"primary--text\"},[_vm._v(_vm._s(_vm.base)+\" - \"+_vm._s(_vm.$t('Assets.Title')))]),_c('v-list-item-action',{staticClass:\"ma-0\"},[_c('v-icon',[_vm._v(\"mdi-open-in-new\")])],1)],1),_c('v-divider',{staticClass:\"mb-4\"}),_c('div',{staticClass:\"px-4 float-right\"},[_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.scale *= 0.8}}},[_c('v-icon',[_vm._v(\"mdi-magnify-minus\")])],1),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.scale = 1}}},[_c('v-icon',[_vm._v(\"mdi-magnify-close\")])],1),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.scale /= 0.8}}},[_c('v-icon',[_vm._v(\"mdi-magnify-plus\")])],1),(_vm.downloading)?_c('v-progress-circular',{staticClass:\"ml-4 mr-2\",attrs:{\"indeterminate\":\"\",\"size\":\"20\",\"width\":\"3\"}}):_c('v-btn',{staticClass:\"ml-2\",attrs:{\"icon\":\"\"},on:{\"click\":_vm.downloadImg}},[_c('v-icon',[_vm._v(\"mdi-download\")])],1)],1),_c('div',{staticStyle:{\"width\":\"100%\",\"overflow\":\"hidden\",\"position\":\"relative\"},style:({ height: _vm.scale * 1200 + 'px' })},[_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"50%\",\"transform\":\"translateX(-50%)\"}},[_c('div',{key:_vm.id,style:({ transform: (\"scale(\" + _vm.scale + \") translateY(\" + (((_vm.scale - 1) * 50) / _vm.scale) + \"%)\") })},[_vm._m(0)])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-inline-block\"},[_c('canvas',{staticClass:\"standpic\"})])}]\n\nexport { render, staticRenderFns }","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import setPrototypeOf from \"./setPrototypeOf\";\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","<template lang=\"pug\">\n//- .py-4.text-center(v-if=\"loading\")\n//-   v-progress-circular(indeterminate=true, color=\"primary\")\n//- .pa-4(v-if=\"!character\")\n//-   KeyValue(:k=\"$t('No Character')\")\ndiv\n  p.display.px-4.primary--text {{ $t('Standpic') }}\n\n  v-row(justify=\"center\")\n    v-dialog(v-model=\"dialog\", max-width=\"290\")\n      v-card(v-if=\"!isLoadingDb\")\n        // TODO:i18n\n        v-card-title.text-h5 DBをダウンロードしますか?\n        v-card-text この処理には時間がかかることがあります\n        v-card-actions\n          v-spacer\n          v-btn(color=\"green darken-1\", text, @click=\"dialog = false\") No\n          v-btn(\n            color=\"green darken-1\",\n            text,\n            @click=\"loadAssetBundle()\"\n          ) Yes\n      v-card(v-else)\n        // TODO:i18n\n        v-card-title.text-h5 DBダウンロード中...  \n          v-progress-circular.ml-3(indeterminate)\n        //- v-card-text \n        //-   v-progress-circular(indeterminate)\n      \n\n  v-row(no-gutters)\n    v-col(cols=12, sm=12, lg=6)\n      v-select.px-4(\n        v-model=\"characterID\",\n        :label=\"$t('Character') + ` (${characters.length})`\",\n        dense,\n        :items=\"characters.map((item, i) => ({ text: item.m_ADVCharaID, value: i }))\"\n      )\n    v-col(cols=12, sm=6, lg=3)\n      v-select.px-4(\n        v-model=\"poseID\",\n        :label=\"$t('Pose') + ` (${poses.length})`\",\n        dense,\n        :items=\"poses.map((item, i) => ({ text: i, value: i }))\"\n      )\n    v-col(cols=12, sm=6, lg=3, style=\"position: relative\")\n      v-select.px-4(\n        v-model=\"faceID\",\n        :label=\"$t('Face') + ` (${faces.length})`\",\n        dense,\n        :items=\"faces.map((item, i) => ({ text: `${item.key[2]}`, value: i }))\"\n      )\n      v-overlay(absolute, :value=\"loading\", opacity=0)\n        v-progress-circular(indeterminate, color=\"primary\")\n\n  v-list-item(target=\"_blank\", :href=\"$const.sites.standpic.format(base)\")\n    v-list-item-title.primary--text {{ base }} - {{ $t('Assets.Title') }}\n    v-list-item-action.ma-0: v-icon mdi-open-in-new\n\n  v-divider.mb-4\n\n  .px-4.float-right\n    v-btn.ml-2(icon, @click=\"scale *= 0.8\"): v-icon mdi-magnify-minus\n    v-btn.ml-2(icon, @click=\"scale = 1\"): v-icon mdi-magnify-close\n    v-btn.ml-2(icon, @click=\"scale /= 0.8\"): v-icon mdi-magnify-plus\n    v-progress-circular.ml-4.mr-2(\n      v-if=\"downloading\",\n      indeterminate,\n      size=\"20\",\n      width=\"3\"\n    )\n    v-btn.ml-2(v-else, icon, @click=\"downloadImg\"): v-icon mdi-download\n\n  div(style=\"width: 100%; overflow: hidden; position: relative\",\n   :style=\"{ height: scale * 1200 + 'px' }\"\n  )\n    div(style=\"position: absolute; left: 50%; transform: translateX(-50%)\")\n\n      div(\n          :style=\"{ transform: `scale(${scale}) translateY(${((scale - 1) * 50) / scale}%)` }\",\n          :key=\"id\"\n      )\n        .d-inline-block\n          canvas.standpic\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Standpic\",\n  props: [\"id\"],\n  data() {\n    return {\n      index: [],\n      loading: 0,\n      poseID: 0,\n      faceID: 0,\n      scale: 1,\n      characterID: 0,\n      downloading: false,\n      isLoadingDb: false,\n\n      dialog: false,\n    };\n  },\n  computed: {\n    characters() {\n      return this.$db.ADVCharacterListArray.filter((character) =>\n        character.m_ResourceBaseName\n          .toLowerCase()\n          .startsWith(this.id.toLowerCase())\n      );\n    },\n    character() {\n      return this.characters[this.characterID];\n    },\n    poses() {\n      return this.character.m_Datas;\n    },\n    faces() {\n      return this.index.filter(\n        (item) => item.key[0] == \"face\" && item.key[1] == this.poseID\n      );\n    },\n    pose() {\n      return this.poses[this.poseID];\n    },\n    face() {\n      return this.faces[this.faceID];\n    },\n    base() {\n      return this.character.m_ResourceBaseName.toLowerCase();\n    },\n    base_row() {\n      return this.character.m_ResourceBaseName;\n    },\n    faceContainerSize: () => 270,\n\n    src() {\n      return {\n        standpic:\n          \"https://bucket-\" +\n          this.standpicPath() +\n          \"-asset.kirafan.cn/adv/standpic/\" +\n          this.base.toLowerCase() +\n          \"/\" +\n          this.base.toLowerCase() +\n          \"_standpic_0/\" +\n          this.base_row +\n          \"_StandPic_0.png\",\n        face:\n          \"https://bucket-\" +\n          (this.face ? this.face.path : \"\") +\n          \"-asset.kirafan.cn/adv/standpic/\" +\n          this.base +\n          \"/\" +\n          this.base +\n          \"_face_\" +\n          this.poseID +\n          \"_\" +\n          (((this.face && this.face.key[2]) || \"undefined\").toLowerCase() ||\n            \"undefined\") +\n          \"/\" +\n          this.base_row +\n          \"_Face_\" +\n          this.poseID +\n          \"_\" +\n          (\n            (this.face && this.face.key[2]) ||\n            \"undefined\" ||\n            \"undefined\"\n          ).replace(/^(.)/, (_, p1) => p1.toUpperCase()) +\n          \".png\",\n      };\n    },\n    style() {\n      return {\n        width: this.faceContainerSize + \"px\",\n        height: this.faceContainerSize + \"px\",\n        position: \"absolute\",\n        left: this.pose.m_FaceX - this.faceContainerSize / 2 + \"px\",\n        top: this.pose.m_FaceY - this.faceContainerSize / 2 + \"px\",\n      };\n    },\n  },\n  methods: {\n    async load() {\n      this.loading += 1;\n\n      const db = this.standpicDB()[this.base];\n      this.index = db.map((item) => {\n        let key = item.img\n          .split(this.base)[1]\n          .split(\"_\")\n          .slice(1);\n        return { key, path: item.path };\n      });\n\n      if (this.poseID >= this.poses.length) this.poseID = 0;\n      if (this.faceID >= this.faces.length) this.faceID = 0;\n      await this.showImg();\n      this.loading = 0;\n    },\n    async loadAssetBundle() {\n      this.isLoadingDb = true;\n\n      let assetBundle;\n      if (this.$s.loadAssetbundle || false) {\n        assetBundle = this.$db.assetBundle;\n      } else {\n        assetBundle = (\n          await axios.get(\"https://database.kirafan.cn/assetBundle.json\", {\n            responseType: \"json\",\n          })\n        ).data;\n      }\n      const standpicDB = {};\n\n      assetBundle\n        .filter((x) => x.name.match(/^adv\\/standpic\\//))\n        // .map((x) => x.name)\n        .forEach((x) => {\n          let name_ = x.name;\n          let path_ = x.path;\n          let r = name_.match(\n            /adv\\/standpic\\/(?<name>[^/]+)\\/(?<img>[^/.]+).muast/\n          );\n          let name = r.groups.name;\n          let img = r.groups.img;\n          let path = path_[path_.length - 1];\n\n          if (!standpicDB[name]) {\n            standpicDB[name] = [];\n          }\n          if (img.match(\"standpic\")) {\n            standpicDB[name].standpicPath = path;\n          }\n          standpicDB[name].push({ img, path });\n        });\n      this.$db.standpicDB = standpicDB;\n      this.load();\n      this.isLoadingDb = false;\n      this.dialog = false;\n    },\n    async showImg() {\n      this.loading = 1;\n      const chara = new Image();\n      const face = new Image();\n      const imgLoadPromise = [this.imgOnload(chara, this.src.standpic)];\n\n      let useFaceImg;\n\n      if (this.face && this.face.key[2]) {\n        imgLoadPromise.push(this.imgOnload(face, this.src.face));\n        useFaceImg = true;\n      } else {\n        useFaceImg = false;\n      }\n\n      await Promise.all(imgLoadPromise);\n\n      await this.$nextTick(() => {\n        const canvas = document.querySelector(\".standpic\");\n        canvas.width = chara.width;\n        canvas.height = chara.height;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(chara, 0, 0);\n        if (useFaceImg) {\n          ctx.drawImage(\n            face,\n            this.pose.m_FaceX - face.width / 2,\n            this.pose.m_FaceY - face.height / 2\n          );\n        }\n        this.loading = 0;\n      });\n    },\n    async downloadImg() {\n      this.downloading = true;\n      const canvas = document.querySelector(\".standpic\");\n      const blob = await this.toBlob(canvas);\n      this.fileDownloadFromBlob(\n        blob,\n        `${this.base}_face_${this.poseID}_${this.face && this.face.key[2]}` +\n          \".png\"\n      );\n      this.downloading = false;\n    },\n\n    toBlob(CanvasElement) {\n      return new Promise((resolve, reject) => {\n        try {\n          CanvasElement.toBlob(resolve);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    },\n\n    imgOnload(img, url) {\n      // const CORS = false;\n      return new Promise(async (resolve, reject) => {\n        img.onload = () => resolve();\n        img.onerror = (e) => reject(e);\n        const blob = (await axios.get(url, { responseType: \"blob\" })).data;\n        img.src = URL.createObjectURL(blob);\n      });\n    },\n    fileDownloadFromBlob(blob, fileName = \"img.png\") {\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.download = fileName;\n      link.click();\n      URL.revokeObjectURL(url);\n    },\n    standpicDB() {\n      return this.$db.standpicDB;\n    },\n    standpicPath() {\n      try {\n        return this.standpicDB()[this.base].standpicPath || \"\";\n      } catch {\n        return \"\";\n      }\n    },\n  },\n  watch: {\n    id() {\n      this.characterID = 0;\n    },\n    base() {\n      this.load();\n    },\n    faceID() {\n      this.showImg();\n    },\n  },\n  mounted() {\n    if (this.standpicDB()) {\n      this.load();\n    } else if (this.$s.loadAssetbundle || false) {\n      this.loadAssetBundle();\n    } else {\n      this.dialog = true;\n    }\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=35c07346&lang=pug&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VDialog,VDivider,VIcon,VListItem,VListItemAction,VListItemTitle,VOverlay,VProgressCircular,VRow,VSelect,VSpacer})\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.replace` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.replace\ndefineWellKnownSymbol('replace');\n"],"sourceRoot":""}